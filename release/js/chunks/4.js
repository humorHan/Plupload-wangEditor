webpackJsonp([4],[,,,,,function(t,e,n){var i;(function(t,o,a){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   3.2.1
	 */
(function(){"use strict";function r(t){return"function"==typeof t||"object"==typeof t&&null!==t}function s(t){return"function"==typeof t}function l(t){J=t}function d(t){tt=t}function c(){return function(){t.nextTick(h)}}function p(){return function(){W(h)}}function f(){var t=0,e=new it(h),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=h,function(){t.port2.postMessage(0)}}function v(){return function(){setTimeout(h,1)}}function h(){for(var t=0;t<K;t+=2){var e=rt[t],n=rt[t+1];e(n),rt[t]=void 0,rt[t+1]=void 0}K=0}function m(){try{var t=n(8);return W=t.runOnLoop||t.runOnContext,p()}catch(e){return v()}}function b(t,e){var n=this,i=new this.constructor(_);void 0===i[dt]&&N(i);var o=n._state;if(o){var a=arguments[o-1];tt(function(){O(o,i,a,n._result)})}else F(n,i,t,e);return i}function g(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(_);return P(n,t),n}function _(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function A(){return new TypeError("A promises callback cannot return that same promise.")}function I(t){try{return t.then}catch(e){return ut.error=e,ut}}function w(t,e,n,i){try{t.call(e,n,i)}catch(o){return o}}function x(t,e,n){tt(function(t){var i=!1,o=w(n,e,function(n){i||(i=!0,e!==n?P(t,n):k(t,n))},function(e){i||(i=!0,R(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&o&&(i=!0,R(t,o))},t)}function D(t,e){e._state===pt?k(t,e._result):e._state===ft?R(t,e._result):F(e,void 0,function(e){P(t,e)},function(e){R(t,e)})}function C(t,e,n){e.constructor===t.constructor&&n===st&&constructor.resolve===lt?D(t,e):n===ut?R(t,ut.error):void 0===n?k(t,e):s(n)?x(t,e,n):k(t,e)}function P(t,e){t===e?R(t,y()):r(e)?C(t,e,I(e)):k(t,e)}function E(t){t._onerror&&t._onerror(t._result),B(t)}function k(t,e){t._state===ct&&(t._result=e,t._state=pt,0!==t._subscribers.length&&tt(B,t))}function R(t,e){t._state===ct&&(t._state=ft,t._result=e,tt(E,t))}function F(t,e,n,i){var o=t._subscribers,a=o.length;t._onerror=null,o[a]=e,o[a+pt]=n,o[a+ft]=i,0===a&&t._state&&tt(B,t)}function B(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,o,a=t._result,r=0;r<e.length;r+=3)i=e[r],o=e[r+n],i?O(n,i,o,a):o(a);t._subscribers.length=0}}function T(){this.error=null}function S(t,e){try{return t(e)}catch(n){return vt.error=n,vt}}function O(t,e,n,i){var o,a,r,l,d=s(n);if(d){if(o=S(n,i),o===vt?(l=!0,a=o.error,o=null):r=!0,e===o)return void R(e,A())}else o=i,r=!0;e._state!==ct||(d&&r?P(e,o):l?R(e,a):t===pt?k(e,o):t===ft&&R(e,o))}function z(t,e){try{e(function(e){P(t,e)},function(e){R(t,e)})}catch(n){R(t,n)}}function M(){return ht++}function N(t){t[dt]=ht++,t._state=void 0,t._result=void 0,t._subscribers=[]}function L(t){return new yt(this,t).promise}function V(t){var e=this;return new e(X(t)?function(n,i){for(var o=t.length,a=0;a<o;a++)e.resolve(t[a]).then(n,i)}:function(t,e){e(new TypeError("You must pass an array to race."))})}function U(t){var e=this,n=new e(_);return R(n,t),n}function Q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function q(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function j(t){this[dt]=M(),this._result=this._state=void 0,this._subscribers=[],_!==t&&("function"!=typeof t&&Q(),this instanceof j?z(this,t):q())}function H(t,e){this._instanceConstructor=t,this.promise=new t(_),this.promise[dt]||N(this.promise),X(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&k(this.promise,this._result))):R(this.promise,Y())}function Y(){return new Error("Array Methods must be provided an Array")}function $(){var t;if("undefined"!=typeof o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=_t)}var Z;Z=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var W,J,G,X=Z,K=0,tt=function(t,e){rt[K]=t,rt[K+1]=e,K+=2,2===K&&(J?J(h):G())},et="undefined"!=typeof window?window:void 0,nt=et||{},it=nt.MutationObserver||nt.WebKitMutationObserver,ot="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),at="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,rt=new Array(1e3);G=ot?c():it?f():at?u():void 0===et?m():v();var st=b,lt=g,dt=Math.random().toString(36).substring(16),ct=void 0,pt=1,ft=2,ut=new T,vt=new T,ht=0,mt=L,bt=V,gt=U,_t=j;j.all=mt,j.race=bt,j.resolve=lt,j.reject=gt,j._setScheduler=l,j._setAsap=d,j._asap=tt,j.prototype={constructor:j,then:st,"catch":function(t){return this.then(null,t)}};var yt=H;H.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===ct&&n<t;n++)this._eachEntry(e[n],n)},H.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===lt){var o=I(t);if(o===st&&t._state!==ct)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===_t){var a=new n(_);C(a,t,o),this._willSettleAt(a,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(i(t),e)},H.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===ct&&(this._remaining--,t===ft?R(i,n):this._result[e]=n),0===this._remaining&&k(i,this._result)},H.prototype._willSettleAt=function(t,e){var n=this;F(t,void 0,function(t){n._settledAt(pt,e,t)},function(t){n._settledAt(ft,e,t)})};var At=$,It={Promise:_t,polyfill:At};n(9).amd?(i=function(){return It}.call(e,n,e,a),!(void 0!==i&&(a.exports=i))):"undefined"!=typeof a&&a.exports?a.exports=It:"undefined"!=typeof this&&(this.ES6Promise=It),At()}).call(this)}).call(e,n(6),function(){return this}(),n(7)(t))},,function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i,o;n(67),i=n(69),o=n(70),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},function(t,e,n){var i=n(68);"string"==typeof i&&(i=[[t.id,i,""]]);n(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(41)(),e.push([t.id,".use-consignee-info.btn-link{text-decoration:none;cursor:pointer}.use-consignee-info.btn-link:hover{text-decoration:underline}","",{version:3,sources:["/./src/views/order/comp/invoiceInfoComponent.vue.style"],names:[],mappings:"AA+GA,6BACA,qBAAA,AACA,cAAA,CACA,AAEA,mCACA,yBAAA,CACA",file:"invoiceInfoComponent.vue",sourcesContent:['<!-- editInvoiceInfoComponent.vue -->\n<template>\n\t<div class="row">\n\t\t<div class="col-md-6">\n            <div class="form-group">\n                <label class="control-label" for="invoiceAmount">开票金额<span class="text-danger">*</span></label>\n                <input class="form-control" style="width:30%;" id="invoiceAmount" type="text" v-model="invoiceData.amount | priceFilter">\n            </div>\n            <div class="form-group">\n                <label class="control-label" for="invoiceContent">开票内容<span class="text-danger">*</span></label>\n                <select class="form-control" style="width:30%;" id="invoiceContent" v-model="invoiceData.content">\n                    <option>制作费</option>\n                    <option>服务费</option>\n                    <option>会议服务费</option>\n                    <option>设计费</option>\n                    <option>代理费</option>\n                    <option>文化咨询费</option>\n                </select>\n            </div>\n            <div class="form-group">\n                <label class="control-label" for="invoiceType">发票类型<span class="text-danger">*</span></label>\n                <select class="form-control" style="width:30%;" id="invoiceType" v-model="invoiceData.zengzhishui | formatInvoiceType" number>\n                    <option value="1">普通发票</option>\n                    <option value="2">增值税发票</option>\n                </select>\n            </div>\n            <div class="form-group">\n                <label class="control-label" for="invoiceTitle">开票抬头<span class="text-danger">*</span></label>\n                <input class="form-control" style="width:50%;" id="invoiceTitle" type="text" v-model="invoiceData.title">\n            </div>\n            <div v-if="invoiceData.zengzhishui">\n                <div class="form-group">\n                    <label class="control-label" for="invoiceZZSIdentifier">纳税人识别号<span class="text-danger">*</span></label>\n                    <input class="form-control" style="width:50%;" id="invoiceZZSIdentifier" type="text" v-model="invoiceData.zengzhishui.identifier">\n                </div>\n                <div class="form-group">\n                    <label class="control-label" for="invoiceZZSAddress">注册地址<span class="text-danger">*</span></label>\n                    <input class="form-control" style="width:50%;" id="invoiceZZSAddress" type="text" v-model="invoiceData.zengzhishui.address">\n                </div>\n                <div class="form-group">\n                    <label class="control-label" for="invoiceZZSPhone">电话<span class="text-danger">*</span></label>\n                    <input class="form-control" style="width:50%;" id="invoiceZZSPhone" type="text" v-model="invoiceData.zengzhishui.phone">\n                </div>\n                <div class="form-group">\n                    <label class="control-label" for="invoiceZZSBank">开户行<span class="text-danger">*</span></label>\n                    <input class="form-control" style="width:50%;" id="invoiceZZSBank" type="text" v-model="invoiceData.zengzhishui.bank">\n                </div>\n                <div class="form-group">\n                    <label class="control-label" for="invoiceZZSAccount">账号<span class="text-danger">*</span></label>\n                    <input class="form-control" style="width:50%;" id="invoiceZZSAccount" type="text" v-model="invoiceData.zengzhishui.account">\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label" for="invoiceRemark">备注</label>\n                <input class="form-control" style="width:80%;" id="invoiceRemark" type="text" v-model="invoiceData.remark">\n            </div>\n        </div>\n        <div class="col-md-6">\n            <h4>发票寄送至：</h4>\n            <p v-for="consignee of consignees">\n                <a class="use-consignee-info btn-link" @click="useConsigneeInfo(consignee)">使用收货人{{$index + 1}}信息</a>\n            </p>\n            <div class="form-group">\n                <label class="control-label" for="invoiceConsigneeName">收货人<span class="text-danger">*</span></label>\n                <input class="form-control" style="width:30%;" id="invoiceConsigneeName" type="text" v-model="invoiceData.consignee_name">\n            </div>\n            <div class="form-group">\n                <label class="control-label" for="invoiceConsigneePhone">联系方式<span class="text-danger">*</span></label>\n                <input class="form-control" style="width:30%;" id="invoiceConsigneePhone" type="text" v-model="invoiceData.consignee_phone">\n            </div>\n            <div class="form-group">\n                <label class="control-label" for="invoiceConsigneeAddress">收货地址<span class="text-danger">*</span></label>\n                <input class="form-control" style="width:80%;" id="invoiceConsigneeAddress" type="text" v-model="invoiceData.address">\n            </div>\n        </div>\n\t</div>\n</template>\n\n<script>\nexport default {\n    name: \'InvoiceInfoComponentView\',\n    props: [\'invoiceData\', \'consignees\'],\n    filters: {\n        formatInvoiceType: {\n            read(val) {\n                return val ? 2 : 1;\n            },\n            write(val, oldVal) {\n                if (val == 1) {\n                    return undefined;\n                } else {\n                    return {};\n                }\n            },\n        }\n    },\n    methods: {\n        useConsigneeInfo(consignee) {\n            this.invoiceData.consignee_name = consignee.name;\n            this.invoiceData.consignee_phone = consignee.phone;\n            if (consignee.fullRegionName && consignee.address) {\n                this.invoiceData.address = consignee.fullRegionName + consignee.address;\n            } else {\n                this.invoiceData.address = \'\';\n            }\n        },\n    },\n}\n</script>\n\n<style scope>\n.use-consignee-info.btn-link {\n    text-decoration: none;\n    cursor: pointer;\n}\n\n.use-consignee-info.btn-link:hover {\n    text-decoration: underline;\n}\n</style>'],sourceRoot:"webpack://"}])},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={name:"InvoiceInfoComponentView",props:["invoiceData","consignees"],filters:{formatInvoiceType:{read:function(t){return t?2:1},write:function(t,e){return 1==t?void 0:{}}}},methods:{useConsigneeInfo:function(t){this.invoiceData.consignee_name=t.name,this.invoiceData.consignee_phone=t.phone,t.fullRegionName&&t.address?this.invoiceData.address=t.fullRegionName+t.address:this.invoiceData.address=""}}}},function(t,e){t.exports=' <div class=row> <div class=col-md-6> <div class=form-group> <label class=control-label for=invoiceAmount>开票金额<span class=text-danger>*</span></label> <input class=form-control style=width:30% id=invoiceAmount type=text v-model="invoiceData.amount | priceFilter"> </div> <div class=form-group> <label class=control-label for=invoiceContent>开票内容<span class=text-danger>*</span></label> <select class=form-control style=width:30% id=invoiceContent v-model=invoiceData.content> <option>制作费</option> <option>服务费</option> <option>会议服务费</option> <option>设计费</option> <option>代理费</option> <option>文化咨询费</option> </select> </div> <div class=form-group> <label class=control-label for=invoiceType>发票类型<span class=text-danger>*</span></label> <select class=form-control style=width:30% id=invoiceType v-model="invoiceData.zengzhishui | formatInvoiceType" number> <option value=1>普通发票</option> <option value=2>增值税发票</option> </select> </div> <div class=form-group> <label class=control-label for=invoiceTitle>开票抬头<span class=text-danger>*</span></label> <input class=form-control style=width:50% id=invoiceTitle type=text v-model=invoiceData.title> </div> <div v-if=invoiceData.zengzhishui> <div class=form-group> <label class=control-label for=invoiceZZSIdentifier>纳税人识别号<span class=text-danger>*</span></label> <input class=form-control style=width:50% id=invoiceZZSIdentifier type=text v-model=invoiceData.zengzhishui.identifier> </div> <div class=form-group> <label class=control-label for=invoiceZZSAddress>注册地址<span class=text-danger>*</span></label> <input class=form-control style=width:50% id=invoiceZZSAddress type=text v-model=invoiceData.zengzhishui.address> </div> <div class=form-group> <label class=control-label for=invoiceZZSPhone>电话<span class=text-danger>*</span></label> <input class=form-control style=width:50% id=invoiceZZSPhone type=text v-model=invoiceData.zengzhishui.phone> </div> <div class=form-group> <label class=control-label for=invoiceZZSBank>开户行<span class=text-danger>*</span></label> <input class=form-control style=width:50% id=invoiceZZSBank type=text v-model=invoiceData.zengzhishui.bank> </div> <div class=form-group> <label class=control-label for=invoiceZZSAccount>账号<span class=text-danger>*</span></label> <input class=form-control style=width:50% id=invoiceZZSAccount type=text v-model=invoiceData.zengzhishui.account> </div> </div> <div class=form-group> <label class=control-label for=invoiceRemark>备注</label> <input class=form-control style=width:80% id=invoiceRemark type=text v-model=invoiceData.remark> </div> </div> <div class=col-md-6> <h4>发票寄送至：</h4> <p v-for="consignee of consignees"> <a class="use-consignee-info btn-link" @click=useConsigneeInfo(consignee)>使用收货人{{$index + 1}}信息</a> </p> <div class=form-group> <label class=control-label for=invoiceConsigneeName>收货人<span class=text-danger>*</span></label> <input class=form-control style=width:30% id=invoiceConsigneeName type=text v-model=invoiceData.consignee_name> </div> <div class=form-group> <label class=control-label for=invoiceConsigneePhone>联系方式<span class=text-danger>*</span></label> <input class=form-control style=width:30% id=invoiceConsigneePhone type=text v-model=invoiceData.consignee_phone> </div> <div class=form-group> <label class=control-label for=invoiceConsigneeAddress>收货地址<span class=text-danger>*</span></label> <input class=form-control style=width:80% id=invoiceConsigneeAddress type=text v-model=invoiceData.address> </div> </div> </div> '},,function(t,e,n){var i,o;n(73),i=n(75),o=n(76),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},function(t,e,n){var i=n(74);"string"==typeof i&&(i=[[t.id,i,""]]);n(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(41)(),e.push([t.id,".modal[_v-2d975ce0]{height:100%}.modal-dialog[_v-2d975ce0]{top:30%}","",{version:3,sources:["/./src/components/popupDialog.vue.style"],names:[],mappings:"AAwDA,oBACA,WAAA,CACA,AAEA,2BACA,OAAA,CACA",file:"popupDialog.vue",sourcesContent:['<!-- popupDialog.vue -->\n<template>\n    <div class="modal" v-show="showDialog">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <button type="button" class="close" @click="closeDialog">&times;</button>\n                    <h4 class="modal-title">{{ dialogTitle }}</h4>\n                </div>\n                <div class="modal-body">\n                    <p>{{ dialogContent }}</p>\n                </div>\n                <div class="modal-footer">\n                    <button type="button" class="btn btn-default" @click="clickNegativeButton">{{ negativeButtonText }}</button>\n        \t\t\t<button type="button" class="btn btn-primary" @click="clickPositiveButton">{{ positiveButtonText }}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\nexport default {\n    name: \'PopupDialogView\',\n    props: {\n    \tshowDialog: Boolean,\n    \tdialogTitle: String,\n    \tdialogContent: String,\n    \tnegativeButtonText: {\n    \t\ttype: String,\n    \t\tdefault: \'取消\'\n    \t},\n    \tpositiveButtonText: {\n    \t\ttype: String,\n    \t\tdefault: \'确定\'\n    \t},\n    },\n    methods: {\n    \tcloseDialog(event) {\n    \t\tthis.showDialog = false;\n    \t},\n    \tclickPositiveButton(event) {\n    \t\tthis.showDialog = false;\n    \t\tthis.$dispatch(\'click-positive-button\');\n    \t},\n    \tclickNegativeButton(event) {\n    \t\tthis.showDialog = false;\n    \t\tthis.$dispatch(\'click-negative-button\');\n    \t},\n    },\n}\n\n</script>\n\n<style scoped>\n.modal {\n\theight: 100%;\n}\n\n.modal-dialog {\n\ttop: 30%;\n}\n\n</style>'],sourceRoot:"webpack://"}])},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={name:"PopupDialogView",props:{showDialog:Boolean,dialogTitle:String,dialogContent:String,negativeButtonText:{type:String,"default":"取消"},positiveButtonText:{type:String,"default":"确定"}},methods:{closeDialog:function(t){this.showDialog=!1},clickPositiveButton:function(t){this.showDialog=!1,this.$dispatch("click-positive-button")},clickNegativeButton:function(t){this.showDialog=!1,this.$dispatch("click-negative-button")}}}},function(t,e){t.exports=' <div class=modal v-show=showDialog _v-2d975ce0=""> <div class=modal-dialog _v-2d975ce0=""> <div class=modal-content _v-2d975ce0=""> <div class=modal-header _v-2d975ce0=""> <button type=button class=close @click=closeDialog _v-2d975ce0="">×</button> <h4 class=modal-title _v-2d975ce0="">{{ dialogTitle }}</h4> </div> <div class=modal-body _v-2d975ce0=""> <p _v-2d975ce0="">{{ dialogContent }}</p> </div> <div class=modal-footer _v-2d975ce0=""> <button type=button class="btn btn-default" @click=clickNegativeButton _v-2d975ce0="">{{ negativeButtonText }}</button> <button type=button class="btn btn-primary" @click=clickPositiveButton _v-2d975ce0="">{{ positiveButtonText }}</button> </div> </div> </div> </div> '},function(t,e,n){var i,o;n(78),i=n(80),o=n(81),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},function(t,e,n){var i=n(79);"string"==typeof i&&(i=[[t.id,i,""]]);n(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(41)(),e.push([t.id,".modal{height:100%}.modal-dialog{top:30%}","",{version:3,sources:["/./src/views/order/comp/productDetailDialog.vue.style"],names:[],mappings:"AAkDA,OACA,WAAA,CACA,AAEA,cACA,OAAA,CACA",file:"productDetailDialog.vue",sourcesContent:['<!-- productDetailDialog.vue -->\n<template>\n    <div class="modal" v-show="show">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <button type="button" class="close" @click="hideDialog">&times;</button>\n                    <h4 class="modal-title">非标品详情</h4>\n                </div>\n                <div class="modal-body">\n                    <div class="row">\n                        <div class="col-md-3">产品名称：</div>\n                        <div class="col-md-9">{{detail.name}}</div>\n                    </div>\n                    <div class="row">\n                        <div class="col-md-3">数量：</div>\n                        <div class="col-md-9">{{detail.quantity}}</div>\n                    </div>\n                    <div class="row">\n                        <div class="col-md-3">产品尺寸：</div>\n                        <div class="col-md-9">{{detail.size}}</div>\n                    </div>\n                    <div class="row">\n                        <div class="col-md-3">材质：</div>\n                        <div class="col-md-9">{{detail.caizhi}}</div>\n                    </div>\n                    <div class="row">\n                        <div class="col-md-3">其他要求：</div>\n                        <div class="col-md-9">{{detail.others}}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \'ProductDetailDialogView\',\n    props: [\'show\', \'detail\'],\n    methods: {\n        hideDialog() {\n            this.show = false;\n            this.$dispatch(\'hide-product-detail-dialog\');\n        }\n    },\n}\n</script>\n\n<style>\n.modal {\n    height: 100%;\n}\n\n.modal-dialog {\n    top: 30%;\n}\n</style>'],sourceRoot:"webpack://"}])},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={name:"ProductDetailDialogView",props:["show","detail"],methods:{hideDialog:function(){this.show=!1,this.$dispatch("hide-product-detail-dialog")}}}},function(t,e){t.exports=" <div class=modal v-show=show> <div class=modal-dialog> <div class=modal-content> <div class=modal-header> <button type=button class=close @click=hideDialog>&times;</button> <h4 class=modal-title>非标品详情</h4> </div> <div class=modal-body> <div class=row> <div class=col-md-3>产品名称：</div> <div class=col-md-9>{{detail.name}}</div> </div> <div class=row> <div class=col-md-3>数量：</div> <div class=col-md-9>{{detail.quantity}}</div> </div> <div class=row> <div class=col-md-3>产品尺寸：</div> <div class=col-md-9>{{detail.size}}</div> </div> <div class=row> <div class=col-md-3>材质：</div> <div class=col-md-9>{{detail.caizhi}}</div> </div> <div class=row> <div class=col-md-3>其他要求：</div> <div class=col-md-9>{{detail.others}}</div> </div> </div> </div> </div> </div> "},function(t,e,n){var i,o;n(83),i=n(85),o=n(86),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},function(t,e,n){var i=n(84);"string"==typeof i&&(i=[[t.id,i,""]]);n(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(41)(),e.push([t.id,".popuptips-container[_v-18a77ad0]{position:fixed;left:50%;top:40%;z-index:2000}.panel[_v-18a77ad0]{position:relative;left:-50%}.fade-transition[_v-18a77ad0]{-webkit-transition:all 1s ease;transition:all 1s ease}.fade-leave[_v-18a77ad0]{opacity:0}","",{version:3,sources:["/./src/components/popupTips.vue.style"],names:[],mappings:"AAuCA,kCACA,eAAA,AACA,SAAA,AACA,QAAA,AACA,YAAA,CACA,AACA,oBACA,kBAAA,AACA,SAAA,CACA,AAEA,8BACA,+BAAA,sBAAA,CACA,AAEA,yBACA,SAAA,CACA",file:"popupTips.vue",sourcesContent:['<!-- popupTips.vue -->\n<template>\n\t<div class="popuptips-container" v-if="show" transition="fade">\n\t    <div class="panel panel-{{ tipsType }}">\n\t\t\t<div class="panel-heading">\n\t\t   \t\t<h3 class="panel-title">{{ tipsTitle }}</h3>\n\t\t\t</div>\n\t\t\t<div class="panel-body">\n\t\t    \t{{ tipsContent }}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\nexport default {\n    name: \'PopupTipsView\',\n    replace: false,\n    props: {\n    \tshow: Boolean,\n    \ttipsType: String,\n    \ttipsTitle: String,\n    \ttipsContent: String\n    },\n    watch: {\n        show(val, oldVal) {\n            if (val === true) {\n            \tsetTimeout(() => {\n            \t\tthis.show = false;\n            \t}, 1000);\n            }\n        },\n    },\n}\n\n</script>\n\n<style scoped>\n.popuptips-container {\n\tposition: fixed;\n\tleft: 50%;\n\ttop: 40%;\n    z-index: 2000;\n}\n.panel {\n\tposition: relative;\n    left: -50%;\n}\n\n.fade-transition {\n  transition: all 1s ease;\n}\n\n.fade-leave {\n  opacity: 0;\n}\n</style>'],sourceRoot:"webpack://"}])},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={name:"PopupTipsView",replace:!1,props:{show:Boolean,tipsType:String,tipsTitle:String,tipsContent:String},watch:{show:function(t,e){var n=this;t===!0&&setTimeout(function(){n.show=!1},1e3)}}}},function(t,e){t.exports=' <div class=popuptips-container v-if=show transition=fade _v-18a77ad0=""> <div class="panel panel-{{ tipsType }}" _v-18a77ad0=""> <div class=panel-heading _v-18a77ad0=""> <h3 class=panel-title _v-18a77ad0="">{{ tipsTitle }}</h3> </div> <div class=panel-body _v-18a77ad0=""> {{ tipsContent }} </div> </div> </div> '},function(t,e){"use strict";function n(t){var e={};return e.ok=!1,t?t.length>20?(e.errorMsg="产品名称长度不能大于20",e):(e.ok=!0,e):(e.errorMsg="产品名称不能为空",e)}function i(t){var e={};return e.ok=!1,t?t.length>12?(e.errorMsg="产品数量长度不能大于12",e):(e.ok=!0,e):(e.errorMsg="产品数量不能为空",e)}function o(t){var e={};return e.ok=!1,!t||t<0?(e.errorMsg="产品价格不能为空且必须为正数",e):(e.ok=!0,e)}function a(t){var e={};return e.ok=!1,t?t.length>20?(e.errorMsg="客户名称长度不能大于20",e):(e.ok=!0,e):(e.errorMsg="客户名称不能为空",e)}function r(t){var e={};return e.ok=!1,t?t.length>20?(e.errorMsg="收货人名称长度不能大于20",e):(e.ok=!0,e):(e.errorMsg="收货人名称不能为空",e)}function s(t){var e={};e.ok=!1;var n=/^[0-9]{11}$/;return t?n.test(t)?(e.ok=!0,e):(e.errorMsg="收货人手机格式有误",e):(e.errorMsg="收货人手机不能为空",e)}function l(t,e){var n={};return n.ok=!1,0===t?(n.errorMsg="请选择收货人所在地省市区",n):e?e.length>50?(n.errorMsg="收货人详细地址不能大于50",n):(n.ok=!0,n):(n.errorMsg="收货人详细地址不能为空",n)}function d(t){var e={};return e.ok=!1,!t||t<0?(e.errorMsg="开票金额不能为空且必须为正数",e):(e.ok=!0,e)}function c(t,e){var n={};return n.ok=!1,e?e.length>50?(n.errorMsg=t+"长度不能大于50",n):(n.ok=!0,n):(n.errorMsg=t+"不能为空",n)}function p(t,e){var n={};return n.ok=!1,void 0===t||null===t||""===t?(n.errorMsg="使用额度不能为空",n):t<=0||t>e?(n.errorMsg="使用额度必须为正数且不能超过"+e/100+"元",n):(n.ok=!0,n)}function f(t,e){var n={};return n.ok=!1,void 0===t||null===t||""===t?(n.errorMsg="补充金额不能为空",n):t<=e?(n.errorMsg="补充金额必须大于"+e/100+"元",n):(n.ok=!0,n)}function u(t){var e={};return e.ok=!1,void 0===t||null===t||""===t?(e.errorMsg="额外成本不能为空",e):t<0?(e.errorMsg="额外成本必须大于等于0",e):(e.ok=!0,e)}function v(t,e){var n={};return n.ok=!1,e?e.length>2e3?(n.errorMsg=t+"长度不能大于2000",n):(n.ok=!0,n):(n.errorMsg=t+"不能为空",n)}function h(t,e){var n={};return n.ok=!1,t?t<0?(n.errorMsg="成本必须大于0",n):(n.ok=!0,n):e?(n.ok=!0,n):(n.errorMsg="成本不能为空或者0",n)}function m(t){var e={};return e.ok=!1,void 0===t||null===t||""===t?(e.errorMsg="物流成本不能为空",e):t<0?(e.errorMsg="物流成本必须大于等于0",e):(e.ok=!0,e)}function b(t,e){var n={};return n.ok=!1,e?e.length>2e3?(n.errorMsg=t+"长度不能大于2000",n):(n.ok=!0,n):(n.errorMsg=t+"不能为空",n)}function g(t,e){var n={};return n.ok=!1,!t||t<0?(n.errorMsg="退款金额不能为空且必须为正数",n):t>e?(n.errorMsg="退款金额不能大于"+e/100+"元",n):(n.ok=!0,n)}function _(t){var e={};return e.ok=!1,t?t.length>50?(e.errorMsg="对方账号长度不能大于50",e):(e.ok=!0,e):(e.errorMsg="对方账号不能为空",e)}function y(t){var e={};return e.ok=!1,t?t.length>2e3?(e.errorMsg="退款原因长度不能大于2000",e):(e.ok=!0,e):(e.errorMsg="退款原因不能为空",e)}function A(t,e){var n={};return n.ok=!1,!t||t<0?(n.errorMsg="付款金额不能为空且必须为正数",n):t>e?(n.errorMsg="付款金额不能大于该订单剩余的待支付金额("+e/100+"元)",n):(n.ok=!0,n)}function I(t){var e={};return e.ok=!1,t?t.length>20?(e.errorMsg="供应商名称长度不能大于20",e):(e.ok=!0,e):(e.errorMsg="供应商名称不能为空",e)}function w(t){var e={};return e.ok=!1,t?t.length>20?(e.errorMsg="真实姓名长度不能大于20",e):(e.ok=!0,e):(e.errorMsg="真实姓名不能为空",e)}function x(t){var e={};return e.ok=!1,t?t.length>50?(e.errorMsg="用户名长度不能大于50",e):(e.ok=!0,e):(e.errorMsg="用户名不能为空",e)}function D(t){var e={};e.ok=!1;var n=/^[a-zA-Z0-9]*$/;return t?t.length>20?(e.errorMsg="密码长度不能超过20",e):n.test(t)?(e.ok=!0,e):(e.errorMsg="密码只能包含英文字母和数字",e):(e.errorMsg="密码不能为空",e)}Object.defineProperty(e,"__esModule",{value:!0});var C="******";e.orderValidator={validateProductName:n,validateProductQuantity:i,validateProductPrice:o,validateCustomerName:a,validateConsigneeName:r,validateConsigneePhone:s,validateConsigneeAddress:l,validateInvoiceAmount:d,validateInvoiceItem:c,validateApplyInvoiceAmount:p,validateExtraAmount:f,validateExtraCost:u,validateAfterSaleItem:v,validateProductCost:h,validateLogisticsCost:m,validateLogisticsItem:b,validateRefundAmount:g,validateRefundAccount:_,validateRefundReason:y},e.financeValidator={validatePaymentAmount:A},e.crmValidator={validateSupplierName:I,validateDisplayName:w,validateUserName:x,validatePassword:D,DEFAULT_PASSWORD:C}},,function(t,e,n){var i,o;n(90),i=n(92),o=n(145),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},function(t,e,n){var i=n(91);"string"==typeof i&&(i=[[t.id,i,""]]);n(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(41)(),e.push([t.id,".payment-records-table[_v-1b718ff8],.product-table[_v-1b718ff8],.refund-records-table[_v-1b718ff8]{table-layout:fixed}.payment-records-table td[_v-1b718ff8],.payment-records-table th[_v-1b718ff8],.product-table td[_v-1b718ff8],.product-table th[_v-1b718ff8],.refund-records-table td[_v-1b718ff8],.refund-records-table th[_v-1b718ff8]{text-align:center;vertical-align:middle}.invoice-info .btn-link[_v-1b718ff8],.product-table td .btn-link[_v-1b718ff8]{text-decoration:none;cursor:pointer}.invoice-info .btn-link[_v-1b718ff8]:hover,.product-table td .btn-link[_v-1b718ff8]:hover{text-decoration:underline}","",{version:3,sources:["/./src/views/order/detail.vue.style"],names:[],mappings:"AA24BA,mGACA,kBAAA,CACA,AAEA,wNACA,kBAAA,AACA,qBAAA,CACA,AAEA,8EACA,qBAAA,AACA,cAAA,CACA,AAEA,0FACA,yBAAA,CACA",file:"detail.vue",sourcesContent:['<!-- detail.vue -->\n<template>\n    <div class="container-fluid">\n        <ul class="breadcrumb">\n            <li>订单系统</li>\n            <li>订单管理</li>\n            <li>订单详情：{{orderId}}</li>\n        </ul>\n        <div class="pull-right">\n            <a class="btn btn-info btn-sm" v-show="canCancel" @click="showCancelOrderDialog">取消</a>\n            <a class="btn btn-info btn-sm" v-show="canFinish" @click="showFinishOrderDialog">完成</a>\n            <a class="btn btn-info btn-sm" v-show="canConfirm" @click="showConfirmOrderDialog">确认</a>\n            <a class="btn btn-info btn-sm" v-show="orderId && permissionList.editOrder" v-link="{ path: \'/order/edit/\'+orderId }">编辑</a>\n            <a class="btn btn-info btn-sm" v-show="orderId && permissionList.createOrder" v-link="{ path: \'/order/create/\'+orderId }" target="_blank">复制该订单</a>\n        </div>\n        <h3>订单详情</h3>\n        <p class="clearfix"></p>\n        <div class="panel panel-default">\n            <div class="panel-body">\n                <div class="row h4">\n                    <div class="col-lg-3"><b>订单编号：</b>{{orderBasic.id}}</div>\n                    <div class="col-lg-3"><b>订单状态：</b>{{orderBasic.status | orderStatusFilter}}</div>\n                    <div class="col-lg-3"><b>订单日期：</b>{{orderDate | dateFormat \'toDate\'}}</div>\n                    <div class="col-lg-3"><b>创建时间：</b>{{orderBasic.create_time | dateFormat}}</div>\n                </div>\n                <div class="row h4">\n                    <div class="col-lg-3"><b>客户经理/客服：</b>{{orderBasic.manager ? orderBasic.manager.display_name : \'\'}}</div>\n                    <div class="col-lg-6"><b>创建人：</b>{{orderBasic.creator.type === \'USER\' ? \'酱印网 \' + (orderBasic.creator.username ? orderBasic.creator.username : \'\') : orderBasic.creator.display_name}}</div>\n                </div>\n                <div class="row h4">\n                    <div class="col-lg-3"><b>订单金额：</b>{{(orderId ? orderBasic.amount + orderBasic.freight : \'\') | realPrice}}{{orderBasic.is_priced === false ? \'+？\' : \'\'}}元</div>\n                    <div class="col-lg-3"><b>盈利：</b>{{(isOrderProfitSure ? (orderBasic.amount + orderBasic.freight - orderBasic.cost - orderBasic.extra_cost - orderBasic.logistics_cost - orderBasic.invoice_logistics_cost - orderBasic.refunded_amount) : \'\') | realPrice}}{{(!orderId || isOrderProfitSure) ? \'\' : \'？\'}}元</div>\n                </div>\n                <div class="row h4">\n                    <div class="col-lg-3"><b>商品成本：</b>{{orderBasic.cost | realPrice}}{{!orderId || isProductCostSure ? \'\' : \'+？\'}}元</div>\n                    <div class="col-lg-3"><b>额外成本：</b>{{orderBasic.extra_cost | realPrice}}元</div>\n                    <div class="col-lg-3"><b>物流成本：</b>{{orderBasic.logistics_cost | realPrice}}+{{orderBasic.invoice_logistics_cost | realPrice}}元</div>\n                    <div class="col-lg-3"><b>退款金额：</b>{{orderBasic.refunded_amount | realPrice}}元</div>\n                </div>  \n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading">商品清单</div>\n            <div class="panel-body">\n                <table class="table table-bordered table-hover product-table">\n                    <thead>\n                        <tr>\n                            <th style="width:6%;">ID</th>\n                            <th style="width:10%;">产品名称</th>\n                            <th style="width:18%;">参数</th>\n                            <th style="width:8%;">数量</th>\n                            <th style="width:8%;">价格(元)</th>\n                            <th style="width:8%;">成本(元)</th>\n                            <th style="width:15%;">到货时间要求</th>\n                            <th style="width:8%;">制作负责人</th>\n                            <th style="width:8%;">制作状态</th>\n                            <th style="width:11%;">印刷文件</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for="item of orderItems">\n                            <td>{{item.id}}</td>\n                            <template v-if="item.is_custom">\n                                <td>{{item.detail.name}}</td>\n                                <td>\n                                    <a class="btn-link" @click="showProductDetailDialog(item)">\n                                        {{item.detail.size}}{{(item.detail.size && (item.detail.caizhi || item.detail.others)) ? \'_\' : \'\'}}{{item.detail.caizhi}}{{(item.detail.caizhi && item.detail.others) ? \'_\' : \'\'}}{{item.detail.others}}\n                                    </a>\n                                </td>\n                                <td>{{item.detail.quantity}}</td>\n                            </template>\n                            <template v-else>\n                                <td>\n                                    <a class="btn-link" :href="\'http://www.soyyin.com/product?id=\'+item.product_id+\'#\'+item.brief" target="_blank">{{item.title}}</a>\n                                </td>\n                                <td>{{item.brief}}</td>\n                                <td>{{item.quantity}}</td>\n                            </template>\n                            <td>{{item.price === 0 ? \'暂无\' : \'\'}}{{(item.price === 0 ? \'\' : item.price ) | realPrice}}</td>\n                            <td>{{(item.cost ? item.cost : \'\') | realPrice}}</td>\n                            <td>{{item.arrival_time}}</td>\n                            <td>{{item.producer ? item.producer.name : \'\'}}</td>\n                            <td>{{item.produce_status | produceStatusFilter}}</td>\n                            <td><a class="btn-link" v-if="item.file" :href="item.file.file_key | getQiniuUrl" target="_blank">{{item.file.file_name}}</a></td>\n                        </tr>\n                    </tbody>\n                </table>\n\n                <div class="row">\n                    <div class="col-lg-6">\n                        <div class="panel panel-default">\n                            <div class="panel-body">\n                                <a class="pull-right btn btn-info btn-sm" v-show="canChangeExtraAmount" @click="changeExtraAmount">修改</a>\n                                <h4>订单金额补充</h4>\n                                <div class="row" style="margin: 0;">\n                                    <label class="pull-left">补充金额：</label>\n                                    <p class="pull-left">{{orderBasic.freight | realPrice}}元</p>\n                                </div>\n                                <div class="row" style="margin: 0;">\n                                    <label class="pull-left">备注：</label>\n                                    <p class="pull-left" style="width: 85%;">{{orderBasic.freight_remark}}</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-lg-6">\n                        <div class="panel panel-default">\n                            <div class="panel-body">\n                                <a class="pull-right btn btn-info btn-sm" v-show="canChangeExtraCost" @click="changeExtraCost">修改</a>\n                                <h4>额外成本</h4>\n                                <div class="row" style="margin: 0;">\n                                    <label class="pull-left">金额：</label>\n                                    <p class="pull-left">{{orderBasic.extra_cost | realPrice}}元</p>\n                                </div>\n                                <div class="row" style="margin: 0;">\n                                    <label class="pull-left">备注：</label>\n                                    <p class="pull-left" style="width: 85%;">{{orderBasic.extra_cost_remark}}</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <h4 class="pull-right"><b>订单金额：</b>{{(orderId ? orderBasic.amount + orderBasic.freight : \'\') | realPrice}}{{orderBasic.is_priced === false ? \'+？\' : \'\'}}元</h4>\n                </div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading">客户信息</div>\n            <div class="panel-body">\n                <h4 class="row" style="margin-bottom: 25px;">\n                    <div class="col-lg-3"><b>客户名称：</b>{{orderBasic.customer.name}}</div>\n                    <div class="col-lg-3"><b>联系电话：</b>{{orderBasic.customer.phone}}</div>\n                    <div class="col-lg-2"><b>QQ：</b>{{orderBasic.customer.qq}}</div>\n                    <div class="col-lg-4"><b>公司：</b>{{orderBasic.customer.company}}</div>\n                </h4>\n                <template v-for="consigneeItem of consignees">\n                    <consignee-info-with-logistics :index="$index" :consignee-item="consigneeItem" :can-add-logistics="false"></consignee-info-with-logistics>\n                </template>\n            </div>\n        </div>\n        <div class="panel panel-default invoice-info">\n            <div class="panel-heading">发票信息</div>\n            <div class="panel-body">\n                <a class="pull-right btn btn-info btn-sm" v-if="canApplyInvoice" @click="clickToApplyInvoice">申请开票</a>\n                <h4 class="row">\n                    <div class="col-lg-3"><b>开票额度：</b>{{(orderId ? orderBasic.amount + orderBasic.freight : \'\') | realPrice}}{{orderBasic.is_priced === false ? \'+？\' : \'\'}}元</div>\n                    <div class="col-lg-3"><b>已申请：</b>{{orderBasic.invoiced_amount | realPrice}}元</div>\n                </h4>\n                <p><a class="btn-link" v-if="invoiceInfo" @click="clickToshowInvoiceInfoDialog">{{invoiceInfo.zengzhishui ? \'增值税发票\' : \'普通发票\'}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{invoiceInfo.title}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{invoiceInfo.content}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{invoiceInfo.amount | realPrice}}元</a></p>\n                <template v-if="invoiceRecords.length > 0">\n                    <h4>开票历史</h4>\n                    <div class="panel panel-default" v-for="recordItem in invoiceRecords">\n                        <div class="panel-body">\n                            <a class="pull-right btn-link" @click="showOrHideInvoiceRecordItem(recordItem)">{{recordItem.showAll ? \'收起\' : \'展开\'}}</a>\n                            <div class="row">\n                                <div class="col-lg-2"><b>状态：</b>{{recordItem.status | invoiceStatusFilter}}</div>\n                                <div class="col-lg-3"><b>申请时间：</b>{{recordItem.create_time | dateFormat}}</div>\n                                <div class="col-lg-6">{{recordItem.data.zengzhishui ? \'增值税发票\' : \'普通发票\'}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.data.title}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.data.content}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.data.amount | realPrice}}元</div>\n                            </div>\n                            <div v-show="recordItem.showAll">\n                                <div class="row">\n                                    <div class="col-lg-2"><b>开票申请ID：</b>{{recordItem.id}}</div>\n                                    <div class="col-lg-3"><b>开票类型：</b>{{recordItem.order_ids.length > 1 ? \'(\' + recordItem.order_ids.length + \'订单)合并开票\' : \'单开\'}}</div>\n                                    <div class="col-lg-2"><b>使用额度：</b>{{recordItem.amount_of_order | realPrice}}元</div>\n                                    <div class="col-lg-3" v-if="recordItem.invoice_time"><b>开票时间：</b>{{recordItem.invoice_time | dateFormat}}</div>\n                                    <div class="col-lg-3" v-if="recordItem.finish_time"><b>完成时间：</b>{{recordItem.finish_time | dateFormat}}</div>\n                                </div>\n                                <div class="row" style="margin: 0;" v-if="recordItem.data.remark">\n                                    <div class="pull-left"><b>备注：</b></div>\n                                    <p class="pull-left" style="width: 90%;">{{recordItem.data.remark}}</p>\n                                </div>\n                                <div class="row" v-if="recordItem.data.zengzhishui">\n                                    <div class="col-lg-1" style="text-align:right;">增值税发票信息</div>\n                                    <div class="col-lg-11">\n                                        <div class="row">\n                                            <div class="col-lg-4"><b>纳税人识别号：</b>{{recordItem.data.zengzhishui.identifier}}</div>\n                                            <div class="col-lg-3"><b>电话：</b>{{recordItem.data.zengzhishui.phone}}</div>\n                                        </div>\n                                        <div class="row">\n                                            <div class="col-lg-12"><b>注册地址：</b>{{recordItem.data.zengzhishui.address}}</div>\n                                        </div>\n                                        <div class="row">\n                                            <div class="col-lg-4"><b>银行账号：</b>{{recordItem.data.zengzhishui.account}}</div>\n                                            <div class="col-lg-7"><b>开户行：</b>{{recordItem.data.zengzhishui.bank}}</div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-lg-1" style="text-align:right;">发票寄送至</div>\n                                    <div class="col-lg-11">\n                                        <div class="row">\n                                            <div class="col-lg-4"><b>收货人：</b>{{recordItem.data.consignee_name}}</div>\n                                            <div class="col-lg-3"><b>联系电话：</b>{{recordItem.data.consignee_phone}}</div>\n                                        </div>\n                                        <div class="row">\n                                            <div class="col-lg-12"><b>邮寄地址：</b>{{recordItem.data.address}}</div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="row" v-if="recordItem.logistics">\n                                    <div class="col-lg-1" style="text-align:right;">物流信息</div>\n                                    <div class="col-lg-11">\n                                        <div>{{recordItem.logistics.delivery_method}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.logistics.express}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.logistics.express_order_id}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.logistics.cost | realPrice}}元&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.logistics.create_time | dateFormat}}录入</div>\n                                        <div v-if="recordItem.logistics.remark">{{recordItem.logistics.remark}}</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </template>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading">付款信息</div>\n            <div class="panel-body">\n                <template v-if="orderBasic.status === \'DELIVERY_CONFIRMED\'">\n                    <a class="pull-right btn btn-info btn-sm" @click="jumpToZhifubaoPayLink">支付宝支付链接</a>\n                    <a class="pull-right btn btn-info btn-sm" style="margin-right:20px;" @click="showZhifubaoQRCodeDialog">支付宝二维码</a>\n                    <a class="pull-right btn btn-info btn-sm" style="margin-right:20px;" @click="showWeChatQRCodeDialog">微信二维码</a>\n                </template>\n                <h4 class="row">\n                    <template v-if="orderBasic.is_priced">\n                        <div class="col-lg-3"><b>已支付：</b>{{paymentData.paid_amount | realPrice}}元({{Math.round(paymentData.paid_amount / (orderBasic.amount + orderBasic.freight) * 100)}}%)</div>\n                        <div class="col-lg-3"><b>待支付：</b>{{(orderBasic.amount + orderBasic.freight - paymentData.paid_amount) | realPrice}}元({{100 - Math.round(paymentData.paid_amount / (orderBasic.amount + orderBasic.freight) * 100)}}%)</div>\n                    </template>\n                    <template v-else>\n                        <div class="col-lg-3"><b>已支付：</b>0元(0%)</div>\n                        <div class="col-lg-3"><b>待支付：</b>？元(100%)</div>\n                    </template>\n                </h4>\n                <h4 v-if="paymentData.payment"><b>付款方式：</b>{{paymentData.payment | paymentFilter}}</h4>\n                <p v-if="paymentData.remark">{{paymentData.remark}}</p>\n                <table class="table table-bordered table-hover payment-records-table" v-if="paymentData.records && paymentData.records.length > 0">\n                    <thead>\n                        <tr>\n                            <th style="width:5%;">序号</th>\n                            <th style="width:20%;">付款时间</th>\n                            <th style="width:10%;">付款途径</th>\n                            <th style="width:15%;">付款方式</th>\n                            <th style="width:30%;">支付单号</th>\n                            <th style="width:10%;">付款金额</th>\n                            <th style="width:10%;">付款比例</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for="paymentRecordItem of paymentData.records">\n                            <td>{{$index + 1}}</td>\n                            <td>{{paymentRecordItem.create_time | dateFormat}}</td>\n                            <td>{{paymentRecordItem.method === \'PINGXX\' ? \'线上支付\' : \'线下转账\'}}</td>\n                            <td>{{paymentRecordItem.method === \'PINGXX\' ? \'Ping++支付\' : (paymentRecordItem.method === \'BANK_TRANSFER\' ? \'银行转账\' : \'支付宝转账\')}}</td>\n                            <td>{{paymentRecordItem.payment_order_id}}</td>\n                            <td>{{paymentRecordItem.amount | realPrice}}元</td>\n                            <td>{{Math.round(paymentRecordItem.amount / (orderBasic.amount + orderBasic.freight) * 100)}}%</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-body">\n                <div class="col-md-6">\n                    <h4>其他信息</h4>\n                    <p><b>备注：</b>{{orderBasic.remark}}</p>\n                </div>\n                <div class="col-md-6">\n                    <h4>历史记录</h4>\n                    <ul class="list-unstyled">\n                        <li v-for="history of orderHistories">\n                            <p :class="{\'text-muted\': $index+1 !== orderHistories.length}">\n                                {{$index+1}}.\n                                {{history.create_time | dateFormat}}\n                                <span :class="{\'text-success\': history.status === \'FINISHED\', \'text-danger\': history.status === \'CANCELED\'}">{{history.status | orderStatusFilter}}</span>\n                            </p>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading">售后处理</div>\n            <div class="panel-body">\n                <a class="pull-right btn btn-info btn-sm" v-if="canRecordAfterSale" @click="clickToRecordAfterSale">录入售后问题</a>\n                <div class="col-lg-10">\n                    <p><b>售后问题描述：</b>暂无</p>\n                    <p><b>处理方案：</b>暂无</p>\n                </div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading">退款处理</div>\n            <div class="panel-body">\n                <a class="pull-right btn btn-info btn-sm" v-if="canApplyRefund" @click="clickToApplyRefund">申请退款</a>\n                <h4 class="row">\n                    <div class="col-lg-4"><b>已申请退款：</b>{{orderBasic.refunded_amount | realPrice}}元</div>\n                </h4>\n                <table class="table table-bordered table-hover refund-records-table" v-if="refundRecords.length > 0">\n                    <thead>\n                        <tr>\n                            <th style="width:5%;">序号</th>\n                            <th style="width:8%;">ID</th>\n                            <th style="width:8%;">退款金额</th>\n                            <th style="width:10%;">状态</th>\n                            <th style="width:19%;">操作时间</th>\n                            <th style="width:12%;">退款类型</th>\n                            <th style="width:22%;">退款信息</th>\n                            <th style="width:16%;">退款原因</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for="refundItem in refundRecords">\n                            <td>{{$index + 1}}</td>\n                            <td>{{refundItem.id}}</td>\n                            <td>{{refundItem.amount | realPrice}}元</td>\n                            <td :class="{\'text-success\': refundItem.status === \'FINISHED\'}">{{refundItem.status | refundStatusFilter}}</td>\n                            <td>\n                                创建时间：{{refundItem.create_time | dateFormat}}<br>\n                                <template v-if="refundItem.finish_time">\n                                    完成时间：{{refundItem.finish_time | dateFormat}}<br>\n                                </template>\n                            </td>\n                            <td>{{refundItem.type | refundTypeFilter}}</td>\n                            <td>\n                                退款渠道：{{refundItem.method | refundWayFilter}}<br>\n                                <template v-if="refundItem.type === \'BY_HAND\'">\n                                    对方账号：{{refundItem.account}}<br>\n                                    对方姓名：{{refundItem.name}}<br>\n                                </template>\n                            </td>\n                            <td>{{refundItem.reason}}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <!-- 发票信息弹框 -->\n        <div class="modal" style="height:100%;" v-if="invoiceInfo" v-show="showInvoiceInfoDialog">\n            <div class="modal-dialog" style="top:30%;width:900px;">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <button type="button" class="close" @click="closeInvoiceInfoDialog">&times;</button>\n                        <h4 class="modal-title">发票信息</h4>\n                    </div>\n                    <div class="modal-body">\n                        <div class="row">\n                            <div class="col-lg-2" style="text-align:right;">发票信息</div>\n                            <div class="col-lg-10">\n                                <div class="row">\n                                    <div class="col-lg-3"><b>开票金额：</b>{{invoiceInfo.amount | realPrice}}元</div>\n                                    <div class="col-lg-3"><b>开票类型：</b>{{invoiceInfo.zengzhishui ? \'增值税发票\' : \'普通发票\'}}</div>\n                                    <div class="col-lg-5"><b>开票内容：</b>{{invoiceInfo.content}}</div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-lg-12"><b>发票抬头：</b>{{invoiceInfo.title}}</div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-lg-12"><b>备注：</b>{{invoiceInfo.remark}}</div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row" v-if="invoiceInfo.zengzhishui">\n                            <div class="col-lg-2" style="text-align:right;">增值税发票信息</div>\n                            <div class="col-lg-10">\n                                <div class="row">\n                                    <div class="col-lg-5"><b>纳税人识别号：</b>{{invoiceInfo.zengzhishui.identifier}}</div>\n                                    <div class="col-lg-4"><b>电话：</b>{{invoiceInfo.zengzhishui.phone}}</div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-lg-12"><b>注册地址：</b>{{invoiceInfo.zengzhishui.address}}</div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-lg-5"><b>银行账号：</b>{{invoiceInfo.zengzhishui.account}}</div>\n                                    <div class="col-lg-7"><b>开户行：</b>{{invoiceInfo.zengzhishui.bank}}</div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row">\n                            <div class="col-lg-2" style="text-align:right;">发送寄送至</div>\n                            <div class="col-lg-10">\n                                <div class="row">\n                                    <div class="col-lg-3"><b>收货人：</b>{{invoiceInfo.consignee_name}}</div>\n                                    <div class="col-lg-5"><b>联系电话：</b>{{invoiceInfo.consignee_phone}}</div>\n                                </div>\n                                <div class="row">\n                                    <div class="col-lg-12"><b>邮寄地址：</b>{{invoiceInfo.address}}</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <product-detail-dialog :show.sync="dataForProductDetailDialog.show" :detail="dataForProductDetailDialog.detail"></product-detail-dialog>\n        <edit-extra-amount-dialog v-if="canChangeExtraAmount" :show.sync="dataForEditExtraAmountDialog.show" :data="dataForEditExtraAmountDialog.data"></edit-extra-amount-dialog>\n        <edit-extra-cost-dialog v-if="canChangeExtraCost" :show.sync="dataForEditExtraCostDialog.show" :data="dataForEditExtraCostDialog.data"></edit-extra-cost-dialog>\n        <apply-invoice-dialog v-if="canApplyInvoice" :show.sync="dataForApplyInvoiceDialog.show" :order-ids="dataForApplyInvoiceDialog.orderIds" :invoice-info="dataForApplyInvoiceDialog.invoiceInfo" :max-apply-amount="dataForApplyInvoiceDialog.maxApplyAmount"></apply-invoice-dialog>\n        <pay-qr-code-dialog v-if="orderBasic.status === \'DELIVERY_CONFIRMED\'" :show.sync="dataForPayQrCodeDialog.show" :data="dataForPayQrCodeDialog.data"></pay-qr-code-dialog>\n        <apply-refund-dialog v-if="canApplyRefund" :show.sync="dataForApplyRefundDialog.show" :data="dataForApplyRefundDialog.data"></apply-refund-dialog>\n        <popup-dialog :show-dialog.sync="dataForPopupDialog.show" :dialog-title="dataForPopupDialog.title" :dialog-content="dataForPopupDialog.content"></popup-dialog>\n    </div>\n</template>\n\n<script>\nimport Vue from \'vue\'\nimport pingpp from \'pingpp-js\'\nimport { Promise } from \'es6-promise\'\nimport productDetailDialog from \'./comp/productDetailDialog.vue\'\nimport popupDialog from \'../../components/popupDialog.vue\'\nimport consigneeInfoWithLogistics from \'./comp/consigneeInfoWithLogistics.vue\'\nimport editExtraAmountDialog from \'./comp/editExtraAmountDialog.vue\'\nimport editExtraCostDialog from \'./comp/editExtraCostDialog.vue\'\nimport applyInvoiceDialog from \'./comp/applyInvoiceDialog.vue\'\nimport payQrCodeDialog from \'./comp/payQrCodeDialog.vue\'\nimport applyRefundDialog from \'./comp/applyRefundDialog.vue\'\nimport { callback } from \'../../store\'\nimport { permissionValidator } from \'../../store/rolePermission.js\'\n\nconst CANCEL_ORDER = "CANCEL_ORDER";\nconst FINISH_ORDER = "FINISH_ORDER";\nconst CONFIRM_ORDER = "CONFIRM_ORDER";\n\nexport default {\n    name: \'OrderDetailView\',\n    components: {\n        productDetailDialog,\n        popupDialog,\n        consigneeInfoWithLogistics,\n        editExtraAmountDialog,\n        editExtraCostDialog,\n        applyInvoiceDialog,\n        payQrCodeDialog,\n        applyRefundDialog,\n    },\n    route: {\n        data({to}) {\n            var orderId = to.params.id;\n            if(!orderId) {\n                this.$route.router.go({ path: \'/order/list\' });\n            }\n            this.getOrderDetial(orderId);\n        }\n    },\n    data() {\n        return {\n            orderId: \'\',\n            orderBasic: {\n                customer: {\n                },\n                creator: {\n                },\n            },\n            orderItems: [],\n            consignees: [],\n            paymentData: {},\n            invoiceInfo: null,\n            orderHistories: [],\n            invoiceRecords: [],\n            refundRecords: [],\n            orderDate: null,\n            permissionList: {\n                createOrder: permissionValidator.orderSystem.order.createOrder(),\n                editOrder: permissionValidator.orderSystem.order.editOrder(),\n                finishOrder: permissionValidator.orderSystem.order.finishOrder(),\n                cancelOrder: permissionValidator.orderSystem.order.cancelOrder(),\n                applyInvoice: permissionValidator.orderSystem.order.applyInvoice(),\n                afterSaleDeal: permissionValidator.orderSystem.order.afterSaleDeal(),\n                confirmOrder: permissionValidator.orderSystem.order.confirmOrder(),\n                applyRefund: permissionValidator.orderSystem.order.applyRefund(),\n                changeExtraAmount: permissionValidator.orderSystem.order.changeExtraAmount(),\n                changeExtraCost: permissionValidator.orderSystem.order.changeExtraCost(),\n            },\n            showInvoiceInfoDialog: false,\n            dataForProductDetailDialog: {\n                show: false,\n                detail: {\n                    name: \'\',\n                    quantity: \'\',\n                    size: \'\',\n                    caizhi: \'\',\n                    others:\'\',\n                }\n            },\n            dataForEditExtraAmountDialog: {\n                show: false,\n                data: {\n                    orderId: \'\',\n                    minExtraAmount: \'\',\n                    extraAmount: \'\',\n                    extraAmountRemark: \'\',\n                },\n            },\n            dataForEditExtraCostDialog: {\n                show: false,\n                data: {\n                    orderId: \'\',\n                    extra_cost: \'\',\n                    extra_cost_remark: \'\',\n                },\n            },\n            dataForApplyInvoiceDialog: {\n                show: false,\n                orderIds: [],\n                invoiceInfo: {\n                    amount: \'\',\n                    content: \'\',\n                    title: \'\',\n                    zengzhishui: undefined,\n                    remark: \'\',\n                    consignee_name: \'\',\n                    consignee_phone: \'\',\n                    address: \'\',\n                },\n                maxApplyAmount: \'\',\n            },\n            dataForPayQrCodeDialog: {\n                show: false,\n                data: {\n                    orderId: \'\',\n                    amountToPay: \'\',\n                    type: \'\',\n                    qrCodeUrl: \'\',\n                },\n            },\n            dataForApplyRefundDialog: {\n                show: false,\n                data: {\n                    orderId: \'\',\n                    refundAmount: \'\',\n                    refundMethod: \'\',\n                    refundAccount: \'\',\n                    refundName: \'\',\n                    refundReason: \'\',\n                    maxRefundValue: \'\',\n                },\n            },\n            dataForPopupDialog: {\n                show: false,\n                title: \'删除确认\',\n                content: \'\',\n            },\n        }\n    },\n    computed: {\n        canCancel() {\n            if (this.orderId && this.permissionList.cancelOrder) {\n                if (this.orderBasic.status == \'SUBMITTED\' || this.orderBasic.status == \'ONLINE_PAID\') {\n                    return true;\n                }\n            }\n            return false;\n        },\n        canFinish() {\n            if (this.orderId && this.permissionList.finishOrder) {\n                var flag = true;\n                for (let i = 0; i < this.orderItems.length; i++) {\n                    if (this.orderItems[i].produce_status !== \'COMPLETE\') {\n                        flag = false;\n                        break;\n                    }\n                }\n                if (flag && (this.orderBasic.status == \'DELIVERY_PAID\' || this.orderBasic.status == \'ONLINE_CONFIRMED\')) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        canConfirm() {\n            if (this.orderId && this.permissionList.confirmOrder) {\n                if ((this.orderBasic.status === \'SUBMITTED\' && this.paymentData.payment === \'CASH_ON_DELIVERY\' && this.orderBasic.is_priced) || (this.orderBasic.status === \'ONLINE_PAID\')) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        isOrderProfitSure() {\n            if (this.orderId) {\n                if (!this.orderBasic.is_priced) {\n                    return false;\n                }\n                for (let i = 0; i < this.orderItems.length; i++) {\n                    if (this.orderItems[i].cost === 0) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n            return false;\n        },\n        isProductCostSure() {\n            if (this.orderId) {\n                for (let i = 0; i < this.orderItems.length; i++) {\n                    if (this.orderItems[i].cost === 0) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n            return false;\n        },\n        canChangeExtraAmount() {\n            if (this.orderId && this.permissionList.changeExtraAmount) {\n                if (this.orderBasic.status == \'SUBMITTED\' || this.orderBasic.status == \'DELIVERY_CONFIRMED\') {\n                    return true;\n                }\n            }\n            return false;\n        },\n        canChangeExtraCost() {\n            if (this.orderId && this.permissionList.changeExtraCost) {\n                if (this.orderBasic.status != \'FINISHED\' && this.orderBasic.status != \'CANCELED\') {\n                    return true;\n                }\n            }\n            return false;\n        },\n        canApplyInvoice() {\n            if (this.orderId && this.permissionList.applyInvoice) {\n                if (this.orderBasic.status == \'DELIVERY_CONFIRMED\' || this.orderBasic.status == \'DELIVERY_PAID\' || this.orderBasic.status == \'ONLINE_CONFIRMED\' || this.orderBasic.status == \'FINISHED\') {\n                    if (this.orderBasic.amount + this.orderBasic.freight - this.orderBasic.invoiced_amount > 0) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        },\n        canRecordAfterSale() {\n            if (this.orderId && this.permissionList.afterSaleDeal) {\n                if (this.orderBasic.status == \'DELIVERY_CONFIRMED\' || this.orderBasic.status == \'DELIVERY_PAID\' || this.orderBasic.status == \'ONLINE_CONFIRMED\' || this.orderBasic.status == \'FINISHED\') {\n                    return true;\n                }\n            }\n            return false;\n        },\n        canApplyRefund() {\n            if (this.orderId && this.permissionList.applyRefund) {\n                if (this.paymentData.paid_amount > this.orderBasic.refunded_amount) {\n                    return true;\n                }\n            }\n            return false;\n        },\n    },\n    events: {\n        \'click-positive-button\'() {\n            if (this.dataForPopupDialog.dialogId === CANCEL_ORDER) {\n                this.cancelOrder();\n            } else if (this.dataForPopupDialog.dialogId === FINISH_ORDER) {\n                this.finishOrder();\n            } else if (this.dataForPopupDialog.dialogId === CONFIRM_ORDER) {\n                this.confirmOrder();\n            }\n        },\n        \'edit-extra-amount\'() {\n            location.reload();\n        },\n        \'edit-extra-cost\'() {\n            location.reload();\n        },\n        \'apply-invoice\'() {\n            location.reload();\n        },\n        \'apply-refund\'() {\n            location.reload();\n        },\n    },\n    filters: {\n        paymentFilter(payment) {\n            var paymentMap = {\n                ONLINE: \'在线支付\',\n                CASH_ON_DELIVERY: \'货到付款\',\n            }\n            return paymentMap[payment];\n        },\n    },\n    methods: {\n        getOrderDetial(id) {\n            var url = \'/api/v2/admin/orders/detail-v2?id=\' + id\n            this.$http.get(url)\n            .then((response) => {\n                if(!response.data.result || response.data.result === 0) {\n                    var order = this.preprocessData(response.data);\n                    this.orderId = id;\n                    this.orderBasic = order.basic;\n                    this.orderItems =order.items;\n                    this.consignees = order.consignees;\n                    this.paymentData = order.payment;\n                    this.invoiceInfo = order.invoice;\n                    this.orderHistories = order.histories;\n                    this.invoiceRecords = order.invoice_records;\n                    this.refundRecords = order.refunds;\n                    this.orderDate = order.time;\n                } else {\n                    callback.success(response.data);\n                }\n            },(response) => {\n                callback.error(response);\n            })\n        },\n        showProductDetailDialog(item) {\n            this.dataForProductDetailDialog.show = true;\n            this.dataForProductDetailDialog.detail = {\n                name: item.detail.name,\n                quantity: item.detail.quantity,\n                size: item.detail.size,\n                caizhi: item.detail.caizhi,\n                others: item.detail.others,\n            }\n        },\n        showCancelOrderDialog() {\n            this.dataForPopupDialog.show = true;\n            this.dataForPopupDialog.title = "取消确认";\n            this.dataForPopupDialog.content = "确定取消此订单？";\n            this.dataForPopupDialog.dialogId = CANCEL_ORDER;\n        },\n        showFinishOrderDialog() {\n            this.dataForPopupDialog.show = true;\n            this.dataForPopupDialog.title = "完成确认";\n            this.dataForPopupDialog.content = "确定完成此订单？";\n            this.dataForPopupDialog.dialogId = FINISH_ORDER;\n        },\n        showConfirmOrderDialog() {\n            this.dataForPopupDialog.show = true;\n            this.dataForPopupDialog.title = "确认确认";\n            this.dataForPopupDialog.content = "确定确认此订单？";\n            this.dataForPopupDialog.dialogId = CONFIRM_ORDER;\n        },\n        cancelOrder() {\n            var url = \'/api/v2/admin/orders/cancel?order_id=\' + this.orderId;\n            this.$http.delete(url)\n            .then((response) => {\n                if(!response.data.result || response.data.result === 0){\n                    location.reload();\n                } else {\n                    callback.success(response.data);\n                }\n            },(response) => {\n                callback.error(response);\n            });\n        },\n        finishOrder() {\n            var url = \'/api/v2/admin/orders/complete?order_id=\' + this.orderId;\n            this.$http.put(url)\n            .then((response) => {\n                if(!response.data.result || response.data.result === 0){\n                    location.reload();\n                } else {\n                    callback.success(response.data);\n                }\n            },(response) => {\n                callback.error(response);\n            });\n        },\n        confirmOrder() {\n            var url = \'/api/v2/admin/orders/confirm?order_id=\' + this.orderId;\n            this.$http.put(url)\n            .then((response) => {\n                if(!response.data.result || response.data.result === 0){\n                    location.reload();\n                } else {\n                    callback.success(response.data);\n                }\n            },(response) => {\n                callback.error(response);\n            });\n        },\n        changeExtraAmount() {\n            this.dataForEditExtraAmountDialog.show = true;\n            this.dataForEditExtraAmountDialog.data.orderId = this.orderId;\n            this.dataForEditExtraAmountDialog.data.minExtraAmount = this.orderBasic.is_priced ? this.paymentData.paid_amount - this.orderBasic.amount : 0;\n            this.dataForEditExtraAmountDialog.data.extraAmount = this.orderBasic.freight;\n            this.dataForEditExtraAmountDialog.data.extraAmountRemark = this.orderBasic.freight_remark;\n        },\n        changeExtraCost() {\n            this.dataForEditExtraCostDialog.show = true;\n            this.dataForEditExtraCostDialog.data.orderId = this.orderId;\n            this.dataForEditExtraCostDialog.data.extra_cost = this.orderBasic.extra_cost;\n            this.dataForEditExtraCostDialog.data.extra_cost_remark = this.orderBasic.extra_cost_remark;\n        },\n        clickToApplyInvoice() {\n            this.dataForApplyInvoiceDialog.show = true;\n            this.dataForApplyInvoiceDialog.orderIds = [this.orderId];\n            this.dataForApplyInvoiceDialog.maxApplyAmount = this.orderBasic.amount + this.orderBasic.freight - this.orderBasic.invoiced_amount;\n            if (this.invoiceInfo) {\n                this.dataForApplyInvoiceDialog.invoiceInfo = {\n                    amount: this.invoiceInfo.amount,\n                    content: this.invoiceInfo.content,\n                    title: this.invoiceInfo.title,\n                    remark: this.invoiceInfo.remark,\n                    consignee_name: this.invoiceInfo.consignee_name,\n                    consignee_phone: this.invoiceInfo.consignee_phone,\n                    address: this.invoiceInfo.address,\n                    zengzhishui: (this.invoiceInfo.zengzhishui ? {\n                        identifier: this.invoiceInfo.zengzhishui.identifier,\n                        address: this.invoiceInfo.zengzhishui.address,\n                        phone: this.invoiceInfo.zengzhishui.phone,\n                        account: this.invoiceInfo.zengzhishui.account,\n                        bank: this.invoiceInfo.zengzhishui.bank,\n                    } : undefined),\n                };\n            } else {\n                this.dataForApplyInvoiceDialog.invoiceInfo = {\n                    amount: \'\',\n                    content: \'\',\n                    title: \'\',\n                    zengzhishui: undefined,\n                    remark: \'\',\n                    consignee_name: \'\',\n                    consignee_phone: \'\',\n                    address: \'\',\n                };\n            }\n        },\n        clickToshowInvoiceInfoDialog() {\n            this.showInvoiceInfoDialog = true;\n        },\n        showOrHideInvoiceRecordItem(recordItem) {\n            if (recordItem.showAll === undefined) {\n                Vue.set(recordItem, \'showAll\', true);\n            } else {\n                recordItem.showAll = !recordItem.showAll;\n            }\n        },\n        closeInvoiceInfoDialog() {\n            this.showInvoiceInfoDialog = false;\n        },\n        getPingxxPayCharge(type) {\n            return new Promise((resolve, reject) => {\n                var url = \'/api/v2/admin/orders/create-pingxx-charge\';\n                var data = {\n                    order_id: parseInt(this.orderId),\n                    payment: type,\n                };\n                this.$http.post(url, data)\n                .then((response) => {\n                    if (!response.data.result || response.data.result === 0) {\n                        resolve(response.data.charge);\n                    } else {\n                        callback.success(response.data);\n                        reject(response.data);\n                    }\n                }, (response) => {\n                    callback.error(response);\n                    reject(response);\n                });\n            });\n        },\n        jumpToZhifubaoPayLink() {\n            this.getPingxxPayCharge(\'ALIPAY_PC\').then((charge) => {\n                pingpp.createPayment(charge, function(result, err){\n                    if (result == "success") {\n                        // 只有微信公众账号 wx_pub 支付成功的结果会在这里返回，其他的支付结果都会跳转到 extra 中对应的 URL。\n                    } else if (result == "fail") {\n                        // charge 不正确或者微信公众账号支付失败时会在此处返回\n                        alert(\'Charge不正确!\');\n                        location.reload();\n                    } else if (result == "cancel") {\n                        // 微信公众账号支付取消支付\n                    }\n                });\n            });\n        },\n        showZhifubaoQRCodeDialog() {\n            this.getPingxxPayCharge(\'ALIPAY_QR\').then((charge) => {\n                this.dataForPayQrCodeDialog.show = true;\n                this.dataForPayQrCodeDialog.data.orderId = this.orderId;\n                this.dataForPayQrCodeDialog.data.type = \'ALIPAY_QR\';\n                this.dataForPayQrCodeDialog.data.qrCodeUrl = JSON.parse(charge).credential.alipay_qr;\n                this.dataForPayQrCodeDialog.data.amountToPay = this.orderBasic.amount + this.orderBasic.freight - this.paymentData.paid_amount;\n            });\n        },\n        showWeChatQRCodeDialog() {\n            this.getPingxxPayCharge(\'WECHAT_QR\').then((charge) => {\n                this.dataForPayQrCodeDialog.show = true;\n                this.dataForPayQrCodeDialog.data.orderId = this.orderId;\n                this.dataForPayQrCodeDialog.data.type = \'WECHAT_QR\';\n                this.dataForPayQrCodeDialog.data.qrCodeUrl = JSON.parse(charge).credential.wx_pub_qr;\n                this.dataForPayQrCodeDialog.data.amountToPay = this.orderBasic.amount + this.orderBasic.freight - this.paymentData.paid_amount;\n            });\n        },\n        clickToRecordAfterSale() {\n            //TODO\n        },\n        clickToApplyRefund() {\n            this.dataForApplyRefundDialog.show = true;\n            this.dataForApplyRefundDialog.data.orderId = this.orderId;\n            this.dataForApplyRefundDialog.data.refundAmount = \'\';\n            this.dataForApplyRefundDialog.data.refundMethod = \'\';\n            this.dataForApplyRefundDialog.data.refundAccount = \'\';\n            this.dataForApplyRefundDialog.data.refundName = \'\';\n            this.dataForApplyRefundDialog.data.refundReason = \'\';\n            this.dataForApplyRefundDialog.data.maxRefundValue = this.paymentData.paid_amount - this.orderBasic.refunded_amount;\n        },\n        preprocessData(order) {\n            var refunds = [];\n            for (let i = 0; i < order.refunds.length; i++) {\n                if (order.refunds[i].type !== \'TRANSACTION_FAILED\') {\n                    refunds.push(order.refunds[i]);\n                }\n            }\n            order.refunds = refunds;\n            return order;\n        }\n    }\n}\n</script>\n\n<style scoped>\n.product-table, .payment-records-table, .refund-records-table {\n    table-layout: fixed;\n}\n\n.product-table th, .product-table td, .payment-records-table th, .payment-records-table td, .refund-records-table th, .refund-records-table td {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.product-table td .btn-link, .invoice-info .btn-link {\n    text-decoration: none;\n    cursor: pointer;\n}\n\n.product-table td .btn-link:hover, .invoice-info .btn-link:hover {\n    text-decoration: underline;\n}\n</style>'],
sourceRoot:"webpack://"}])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(10),a=i(o),r=n(93),s=i(r),l=n(5),d=n(77),c=i(d),p=n(72),f=i(p),u=n(117),v=i(u),h=n(120),m=i(h),b=n(125),g=i(b),_=n(130),y=i(_),A=n(135),I=i(A),w=n(140),x=i(w),D=n(48),C=n(45),P="CANCEL_ORDER",E="FINISH_ORDER",k="CONFIRM_ORDER";e["default"]={name:"OrderDetailView",components:{productDetailDialog:c["default"],popupDialog:f["default"],consigneeInfoWithLogistics:v["default"],editExtraAmountDialog:m["default"],editExtraCostDialog:g["default"],applyInvoiceDialog:y["default"],payQrCodeDialog:I["default"],applyRefundDialog:x["default"]},route:{data:function(t){var e=t.to,n=e.params.id;n||this.$route.router.go({path:"/order/list"}),this.getOrderDetial(n)}},data:function(){return{orderId:"",orderBasic:{customer:{},creator:{}},orderItems:[],consignees:[],paymentData:{},invoiceInfo:null,orderHistories:[],invoiceRecords:[],refundRecords:[],orderDate:null,permissionList:{createOrder:C.permissionValidator.orderSystem.order.createOrder(),editOrder:C.permissionValidator.orderSystem.order.editOrder(),finishOrder:C.permissionValidator.orderSystem.order.finishOrder(),cancelOrder:C.permissionValidator.orderSystem.order.cancelOrder(),applyInvoice:C.permissionValidator.orderSystem.order.applyInvoice(),afterSaleDeal:C.permissionValidator.orderSystem.order.afterSaleDeal(),confirmOrder:C.permissionValidator.orderSystem.order.confirmOrder(),applyRefund:C.permissionValidator.orderSystem.order.applyRefund(),changeExtraAmount:C.permissionValidator.orderSystem.order.changeExtraAmount(),changeExtraCost:C.permissionValidator.orderSystem.order.changeExtraCost()},showInvoiceInfoDialog:!1,dataForProductDetailDialog:{show:!1,detail:{name:"",quantity:"",size:"",caizhi:"",others:""}},dataForEditExtraAmountDialog:{show:!1,data:{orderId:"",minExtraAmount:"",extraAmount:"",extraAmountRemark:""}},dataForEditExtraCostDialog:{show:!1,data:{orderId:"",extra_cost:"",extra_cost_remark:""}},dataForApplyInvoiceDialog:{show:!1,orderIds:[],invoiceInfo:{amount:"",content:"",title:"",zengzhishui:void 0,remark:"",consignee_name:"",consignee_phone:"",address:""},maxApplyAmount:""},dataForPayQrCodeDialog:{show:!1,data:{orderId:"",amountToPay:"",type:"",qrCodeUrl:""}},dataForApplyRefundDialog:{show:!1,data:{orderId:"",refundAmount:"",refundMethod:"",refundAccount:"",refundName:"",refundReason:"",maxRefundValue:""}},dataForPopupDialog:{show:!1,title:"删除确认",content:""}}},computed:{canCancel:function(){return!(!this.orderId||!this.permissionList.cancelOrder||"SUBMITTED"!=this.orderBasic.status&&"ONLINE_PAID"!=this.orderBasic.status)},canFinish:function(){if(this.orderId&&this.permissionList.finishOrder){for(var t=!0,e=0;e<this.orderItems.length;e++)if("COMPLETE"!==this.orderItems[e].produce_status){t=!1;break}if(t&&("DELIVERY_PAID"==this.orderBasic.status||"ONLINE_CONFIRMED"==this.orderBasic.status))return!0}return!1},canConfirm:function(){return!!(this.orderId&&this.permissionList.confirmOrder&&("SUBMITTED"===this.orderBasic.status&&"CASH_ON_DELIVERY"===this.paymentData.payment&&this.orderBasic.is_priced||"ONLINE_PAID"===this.orderBasic.status))},isOrderProfitSure:function(){if(this.orderId){if(!this.orderBasic.is_priced)return!1;for(var t=0;t<this.orderItems.length;t++)if(0===this.orderItems[t].cost)return!1;return!0}return!1},isProductCostSure:function(){if(this.orderId){for(var t=0;t<this.orderItems.length;t++)if(0===this.orderItems[t].cost)return!1;return!0}return!1},canChangeExtraAmount:function(){return!(!this.orderId||!this.permissionList.changeExtraAmount||"SUBMITTED"!=this.orderBasic.status&&"DELIVERY_CONFIRMED"!=this.orderBasic.status)},canChangeExtraCost:function(){return!(!this.orderId||!this.permissionList.changeExtraCost||"FINISHED"==this.orderBasic.status||"CANCELED"==this.orderBasic.status)},canApplyInvoice:function(){return!!(this.orderId&&this.permissionList.applyInvoice&&("DELIVERY_CONFIRMED"==this.orderBasic.status||"DELIVERY_PAID"==this.orderBasic.status||"ONLINE_CONFIRMED"==this.orderBasic.status||"FINISHED"==this.orderBasic.status)&&this.orderBasic.amount+this.orderBasic.freight-this.orderBasic.invoiced_amount>0)},canRecordAfterSale:function(){return!(!this.orderId||!this.permissionList.afterSaleDeal||"DELIVERY_CONFIRMED"!=this.orderBasic.status&&"DELIVERY_PAID"!=this.orderBasic.status&&"ONLINE_CONFIRMED"!=this.orderBasic.status&&"FINISHED"!=this.orderBasic.status)},canApplyRefund:function(){return!!(this.orderId&&this.permissionList.applyRefund&&this.paymentData.paid_amount>this.orderBasic.refunded_amount)}},events:{"click-positive-button":function(){this.dataForPopupDialog.dialogId===P?this.cancelOrder():this.dataForPopupDialog.dialogId===E?this.finishOrder():this.dataForPopupDialog.dialogId===k&&this.confirmOrder()},"edit-extra-amount":function(){location.reload()},"edit-extra-cost":function(){location.reload()},"apply-invoice":function(){location.reload()},"apply-refund":function(){location.reload()}},filters:{paymentFilter:function(t){var e={ONLINE:"在线支付",CASH_ON_DELIVERY:"货到付款"};return e[t]}},methods:{getOrderDetial:function(t){var e=this,n="/api/v2/admin/orders/detail-v2?id="+t;this.$http.get(n).then(function(n){if(n.data.result&&0!==n.data.result)D.callback.success(n.data);else{var i=e.preprocessData(n.data);e.orderId=t,e.orderBasic=i.basic,e.orderItems=i.items,e.consignees=i.consignees,e.paymentData=i.payment,e.invoiceInfo=i.invoice,e.orderHistories=i.histories,e.invoiceRecords=i.invoice_records,e.refundRecords=i.refunds,e.orderDate=i.time}},function(t){D.callback.error(t)})},showProductDetailDialog:function(t){this.dataForProductDetailDialog.show=!0,this.dataForProductDetailDialog.detail={name:t.detail.name,quantity:t.detail.quantity,size:t.detail.size,caizhi:t.detail.caizhi,others:t.detail.others}},showCancelOrderDialog:function(){this.dataForPopupDialog.show=!0,this.dataForPopupDialog.title="取消确认",this.dataForPopupDialog.content="确定取消此订单？",this.dataForPopupDialog.dialogId=P},showFinishOrderDialog:function(){this.dataForPopupDialog.show=!0,this.dataForPopupDialog.title="完成确认",this.dataForPopupDialog.content="确定完成此订单？",this.dataForPopupDialog.dialogId=E},showConfirmOrderDialog:function(){this.dataForPopupDialog.show=!0,this.dataForPopupDialog.title="确认确认",this.dataForPopupDialog.content="确定确认此订单？",this.dataForPopupDialog.dialogId=k},cancelOrder:function(){var t="/api/v2/admin/orders/cancel?order_id="+this.orderId;this.$http["delete"](t).then(function(t){t.data.result&&0!==t.data.result?D.callback.success(t.data):location.reload()},function(t){D.callback.error(t)})},finishOrder:function(){var t="/api/v2/admin/orders/complete?order_id="+this.orderId;this.$http.put(t).then(function(t){t.data.result&&0!==t.data.result?D.callback.success(t.data):location.reload()},function(t){D.callback.error(t)})},confirmOrder:function(){var t="/api/v2/admin/orders/confirm?order_id="+this.orderId;this.$http.put(t).then(function(t){t.data.result&&0!==t.data.result?D.callback.success(t.data):location.reload()},function(t){D.callback.error(t)})},changeExtraAmount:function(){this.dataForEditExtraAmountDialog.show=!0,this.dataForEditExtraAmountDialog.data.orderId=this.orderId,this.dataForEditExtraAmountDialog.data.minExtraAmount=this.orderBasic.is_priced?this.paymentData.paid_amount-this.orderBasic.amount:0,this.dataForEditExtraAmountDialog.data.extraAmount=this.orderBasic.freight,this.dataForEditExtraAmountDialog.data.extraAmountRemark=this.orderBasic.freight_remark},changeExtraCost:function(){this.dataForEditExtraCostDialog.show=!0,this.dataForEditExtraCostDialog.data.orderId=this.orderId,this.dataForEditExtraCostDialog.data.extra_cost=this.orderBasic.extra_cost,this.dataForEditExtraCostDialog.data.extra_cost_remark=this.orderBasic.extra_cost_remark},clickToApplyInvoice:function(){this.dataForApplyInvoiceDialog.show=!0,this.dataForApplyInvoiceDialog.orderIds=[this.orderId],this.dataForApplyInvoiceDialog.maxApplyAmount=this.orderBasic.amount+this.orderBasic.freight-this.orderBasic.invoiced_amount,this.invoiceInfo?this.dataForApplyInvoiceDialog.invoiceInfo={amount:this.invoiceInfo.amount,content:this.invoiceInfo.content,title:this.invoiceInfo.title,remark:this.invoiceInfo.remark,consignee_name:this.invoiceInfo.consignee_name,consignee_phone:this.invoiceInfo.consignee_phone,address:this.invoiceInfo.address,zengzhishui:this.invoiceInfo.zengzhishui?{identifier:this.invoiceInfo.zengzhishui.identifier,address:this.invoiceInfo.zengzhishui.address,phone:this.invoiceInfo.zengzhishui.phone,account:this.invoiceInfo.zengzhishui.account,bank:this.invoiceInfo.zengzhishui.bank}:void 0}:this.dataForApplyInvoiceDialog.invoiceInfo={amount:"",content:"",title:"",zengzhishui:void 0,remark:"",consignee_name:"",consignee_phone:"",address:""}},clickToshowInvoiceInfoDialog:function(){this.showInvoiceInfoDialog=!0},showOrHideInvoiceRecordItem:function(t){void 0===t.showAll?a["default"].set(t,"showAll",!0):t.showAll=!t.showAll},closeInvoiceInfoDialog:function(){this.showInvoiceInfoDialog=!1},getPingxxPayCharge:function(t){var e=this;return new l.Promise(function(n,i){var o="/api/v2/admin/orders/create-pingxx-charge",a={order_id:parseInt(e.orderId),payment:t};e.$http.post(o,a).then(function(t){t.data.result&&0!==t.data.result?(D.callback.success(t.data),i(t.data)):n(t.data.charge)},function(t){D.callback.error(t),i(t)})})},jumpToZhifubaoPayLink:function(){this.getPingxxPayCharge("ALIPAY_PC").then(function(t){s["default"].createPayment(t,function(t,e){"success"==t||"fail"==t&&(alert("Charge不正确!"),location.reload())})})},showZhifubaoQRCodeDialog:function(){var t=this;this.getPingxxPayCharge("ALIPAY_QR").then(function(e){t.dataForPayQrCodeDialog.show=!0,t.dataForPayQrCodeDialog.data.orderId=t.orderId,t.dataForPayQrCodeDialog.data.type="ALIPAY_QR",t.dataForPayQrCodeDialog.data.qrCodeUrl=JSON.parse(e).credential.alipay_qr,t.dataForPayQrCodeDialog.data.amountToPay=t.orderBasic.amount+t.orderBasic.freight-t.paymentData.paid_amount})},showWeChatQRCodeDialog:function(){var t=this;this.getPingxxPayCharge("WECHAT_QR").then(function(e){t.dataForPayQrCodeDialog.show=!0,t.dataForPayQrCodeDialog.data.orderId=t.orderId,t.dataForPayQrCodeDialog.data.type="WECHAT_QR",t.dataForPayQrCodeDialog.data.qrCodeUrl=JSON.parse(e).credential.wx_pub_qr,t.dataForPayQrCodeDialog.data.amountToPay=t.orderBasic.amount+t.orderBasic.freight-t.paymentData.paid_amount})},clickToRecordAfterSale:function(){},clickToApplyRefund:function(){this.dataForApplyRefundDialog.show=!0,this.dataForApplyRefundDialog.data.orderId=this.orderId,this.dataForApplyRefundDialog.data.refundAmount="",this.dataForApplyRefundDialog.data.refundMethod="",this.dataForApplyRefundDialog.data.refundAccount="",this.dataForApplyRefundDialog.data.refundName="",this.dataForApplyRefundDialog.data.refundReason="",this.dataForApplyRefundDialog.data.maxRefundValue=this.paymentData.paid_amount-this.orderBasic.refunded_amount},preprocessData:function(t){for(var e=[],n=0;n<t.refunds.length;n++)"TRANSACTION_FAILED"!==t.refunds[n].type&&e.push(t.refunds[n]);return t.refunds=e,t}}}},function(t,e,n){var i=n(94).v,o=n(95),a=n(97),r=n(98),s=n(110),l=n(114),d={}.hasOwnProperty,c=function(){n(116).init()};c.prototype={version:i,createPayment:function(t,e,n,i){"function"==typeof e&&(a.userCallback=e);var c;if("string"==typeof t)try{c=JSON.parse(t)}catch(p){return void a.innerCallback("fail",a.error("json_decode_fail",p))}else c=t;if("undefined"==typeof c)return void a.innerCallback("fail",a.error("json_decode_fail"));if(!d.call(c,"id"))return void a.innerCallback("fail",a.error("invalid_charge","no_charge_id"));if(!d.call(c,"channel"))return void a.innerCallback("fail",a.error("invalid_charge","no_channel"));d.call(c,"app")&&("string"==typeof c.app?s.app_id=c.app:"object"==typeof c.app&&"string"==typeof c.app.id&&(s.app_id=c.app.id)),l.report({type:"pure_sdk_click",channel:c.channel,ch_id:c.id});var f=c.channel;if(!d.call(c,"credential"))return void a.innerCallback("fail",a.error("invalid_charge","no_credential"));if(!c.credential)return void a.innerCallback("fail",a.error("invalid_credential","credential_is_undefined"));if(!d.call(c.credential,f))return void a.innerCallback("fail",a.error("invalid_credential","credential_is_incorrect"));if(!d.call(c,"livemode"))return void a.innerCallback("fail",a.error("invalid_charge","no_livemode_field"));var u=r.getChannelModule(f);return"undefined"==typeof u?(console.error('channel module "'+f+'" is undefined'),void a.innerCallback("fail",a.error("invalid_channel",'channel module "'+f+'" is undefined'))):c.livemode===!1?void(d.call(u,"runTestMode")?u.runTestMode(c):o.runTestMode(c)):("undefined"!=typeof n&&(s.signature=n),"boolean"==typeof i&&(s.debug=i),void u.handleCharge(c))},setAPURL:function(t){s.APURL=t}},t.exports=new c},function(t,e){t.exports={v:"2.1.5"}},function(t,e,n){var i=n(96),o={}.hasOwnProperty;t.exports={PINGPP_MOCK_URL:"http://sissi.pingxx.com/mock.php",runTestMode:function(t){var e={ch_id:t.id,scheme:"http",channel:t.channel};o.call(t,"order_no")?e.order_no=t.order_no:o.call(t,"orderNo")&&(e.order_no=t.orderNo),o.call(t,"time_expire")?e.time_expire=t.time_expire:o.call(t,"timeExpire")&&(e.time_expire=t.timeExpire),o.call(t,"extra")&&(e.extra=encodeURIComponent(JSON.stringify(t.extra))),i.redirectTo(this.PINGPP_MOCK_URL+"?"+i.stringifyData(e))}}},function(t,e){var n={}.hasOwnProperty,i=t.exports={stringifyData:function(t,e,i){"undefined"==typeof i&&(i=!1);var o=[];for(var a in t)n.call(t,a)&&"function"!=typeof t[a]&&("bfb_wap"==e&&"url"==a||"yeepay_wap"==e&&"mode"==a||"channel_url"!=a&&o.push(a+"="+(i?encodeURIComponent(t[a]):t[a])));return o.join("&")},request:function(t,e,o,a,r,s){if("undefined"==typeof XMLHttpRequest)return void console.log("Function XMLHttpRequest is undefined.");var l=new XMLHttpRequest;if("undefined"!=typeof l.timeout&&(l.timeout=6e3),e=e.toUpperCase(),"GET"===e&&"object"==typeof o&&o&&(t+="?"+i.stringifyData(o,"",!0)),l.open(e,t,!0),"undefined"!=typeof s)for(var d in s)n.call(s,d)&&l.setRequestHeader(d,s[d]);"POST"===e?(l.setRequestHeader("Content-type","application/json; charset=utf-8"),l.send(JSON.stringify(o))):l.send(),"undefined"==typeof a&&(a=function(){}),"undefined"==typeof r&&(r=function(){}),l.onreadystatechange=function(){4==l.readyState&&a(l.responseText,l.status,l)},l.onerror=function(t){r(l,0,t)}},formSubmit:function(t,e,i){if("undefined"==typeof window)return void console.log("Not a browser, form submit url: "+t);var o=document.createElement("form");o.setAttribute("method",e),o.setAttribute("action",t);for(var a in i)if(n.call(i,a)){var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",a),r.setAttribute("value",i[a]),o.appendChild(r)}document.body.appendChild(o),o.submit()},randomString:function(t){"undefined"==typeof t&&(t=32);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length,i="",o=0;o<t;o++)i+=e.charAt(Math.floor(Math.random()*n));return i},redirectTo:function(t){return"undefined"==typeof window?void console.log("Not a browser, redirect url: "+t):void(window.location.href=t)},inWeixin:function(){if("undefined"==typeof navigator)return!1;var t=navigator.userAgent.toLowerCase();return t.indexOf("micromessenger")!==-1},documentReady:function(t){return"undefined"==typeof document?void t():void("loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t))}}},function(t,e){t.exports={userCallback:void 0,innerCallback:function(t,e){"function"==typeof this.userCallback&&("undefined"==typeof e&&(e=this.error()),this.userCallback(t,e),this.userCallback=void 0)},error:function(t,e){return t="undefined"==typeof t?"":t,e="undefined"==typeof e?"":e,{msg:t,extra:e}}}},function(t,e,n){var i={}.hasOwnProperty,o={};t.exports=o,o.channels={alipay_pc_direct:n(99),alipay_wap:n(100),bfb_wap:n(101),cp_b2b:n(102),fqlpay_qr:n(103),fqlpay_wap:n(105),jdpay_wap:n(106),upacp_pc:n(107),upacp_wap:n(108),wx_pub:n(109),wx_wap:n(111),yeepay_wap:n(112)},o.extras={ap:n(113)},o.getChannelModule=function(t){if(i.call(o.channels,t))return o.channels[t]},o.getExtraModule=function(t){if(i.call(o.extras,t))return o.extras[t]}},function(t,e,n){var i=n(96),o={}.hasOwnProperty;t.exports={ALIPAY_PC_DIRECT_URL:"https://mapi.alipay.com/gateway.do",handleCharge:function(t){var e=t.channel,n=t.credential[e],a=this.ALIPAY_PC_DIRECT_URL;o.call(n,"channel_url")&&(a=n.channel_url),o.call(n,"_input_charset")||(n._input_charset="utf-8");var r=i.stringifyData(n,e,!0);i.redirectTo(a+"?"+r)}}},function(t,e,n){var i=n(96),o=n(98),a={}.hasOwnProperty;t.exports={ALIPAY_WAP_URL_OLD:"https://wappaygw.alipay.com/service/rest.htm",ALIPAY_WAP_URL:"https://mapi.alipay.com/gateway.do",handleCharge:function(t){var e=t.channel,n=t.credential[e],r=this.ALIPAY_WAP_URL;a.call(n,"req_data")?r=this.ALIPAY_WAP_URL_OLD:a.call(n,"channel_url")&&(r=n.channel_url),a.call(n,"_input_charset")||(n._input_charset="utf-8");var s=i.stringifyData(n,e,!0),l=r+"?"+s,d=o.getExtraModule("ap");i.inWeixin()&&"undefined"!=typeof d?d.pay(l):i.redirectTo(l)}}},function(t,e,n){var i=n(96),o=n(97),a={}.hasOwnProperty;t.exports={handleCharge:function(t){var e=t.channel,n=t.credential[e];return a.call(n,"url")?void i.redirectTo(n.url+"?"+i.stringifyData(n,e)):void o.innerCallback("fail",o.error("invalid_credential","missing_field:url"))}}},function(t,e,n){var i=n(96);t.exports={CP_B2B_URL:"https://payment.chinapay.com/CTITS/service/rest/page/nref/000000000017/0/0/0/0/0",handleCharge:function(t){var e=t.credential[t.channel];i.formSubmit(this.CP_B2B_URL,"post",e)}}},function(t,e,n){var i=n(104);t.exports={handleCharge:function(t){i.handleCharge(t)}}},function(t,e,n){var i=n(96),o=n(97),a={}.hasOwnProperty;t.exports={handleCharge:function(t){var e,n=t.credential[t.channel];if("string"==typeof n)e=n;else{if(!a.call(n,"url"))return void o.innerCallback("fail",o.error("invalid_credential","credential format is incorrect"));e=n.url}i.redirectTo(e)}}},function(t,e,n){var i=n(104);t.exports={handleCharge:function(t){i.handleCharge(t)}}},function(t,e,n){var i=n(96),o={}.hasOwnProperty;t.exports={JDPAY_WAP_URL_OLD:"https://m.jdpay.com/wepay/web/pay",JDPAY_H5_URL:"https://h5pay.jd.com/jdpay/saveOrder",JDPAY_PC_URL:"https://wepay.jd.com/jdpay/saveOrder",handleCharge:function(t){var e=t.credential[t.channel],n=this.JDPAY_H5_URL;o.call(e,"channelUrl")?(n=e.channelUrl,delete e.channelUrl):o.call(e,"merchantRemark")&&(n=this.JDPAY_WAP_URL_OLD),i.formSubmit(n,"post",e)}}},function(t,e,n){var i=n(96);t.exports={UPACP_PC_URL:"https://gateway.95516.com/gateway/api/frontTransReq.do",handleCharge:function(t){var e=t.credential[t.channel];i.formSubmit(this.UPACP_PC_URL,"post",e)}}},function(t,e,n){var i=n(96);t.exports={UPACP_WAP_URL:"https://gateway.95516.com/gateway/api/frontTransReq.do",handleCharge:function(t){var e=t.credential[t.channel];i.formSubmit(this.UPACP_WAP_URL,"post",e)}}},function(t,e,n){var i=n(97),o=n(96),a=n(110),r=n(98),s={}.hasOwnProperty;t.exports={PINGPP_NOTIFY_URL_BASE:"https://api.pingxx.com/notify/charges/",handleCharge:function(t){for(var e=t.credential[t.channel],n=["appId","timeStamp","nonceStr","package","signType","paySign"],o=0;o<n.length;o++)if(!s.call(e,n[o]))return void i.innerCallback("fail",i.error("invalid_credential","missing_field_"+n[o]));a.jsApiParameters=e,this.callpay()},callpay:function(){var t=this,e=r.getExtraModule("wx_jssdk");if("undefined"!=typeof e&&e.jssdkEnabled())e.callpay();else if("undefined"==typeof WeixinJSBridge){var n=function(){t.jsApiCall()};document.addEventListener?document.addEventListener("WeixinJSBridgeReady",n,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",n),document.attachEvent("onWeixinJSBridgeReady",n))}else this.jsApiCall()},jsApiCall:function(){s.call(a,"jsApiParameters")&&WeixinJSBridge.invoke("getBrandWCPayRequest",a.jsApiParameters,function(t){delete a.jsApiParameters,"get_brand_wcpay_request:ok"==t.err_msg?i.innerCallback("success"):"get_brand_wcpay_request:cancel"==t.err_msg?i.innerCallback("cancel"):i.innerCallback("fail",i.error("wx_result_fail",t.err_msg))})},runTestMode:function(t){var e=confirm("模拟付款？");e&&o.request(this.PINGPP_NOTIFY_URL_BASE+t.id+"?livemode=false","GET",null,function(t,e){if(e>=200&&e<400&&"success"==t)i.innerCallback("success");else{var n="http_code:"+e+";response:"+t;i.innerCallback("fail",i.error("testmode_notify_fail",n))}},function(){i.innerCallback("fail",i.error("network_err"))})}}},function(t,e){t.exports={}},function(t,e,n){var i=n(96),o=n(97),a={}.hasOwnProperty;t.exports={handleCharge:function(t){var e=t.credential[t.channel];"string"==typeof e?i.redirectTo(e):"object"==typeof e&&a.call(e,"url")?i.redirectTo(e.url):o.innerCallback("fail",o.error("invalid_credential","credential 格式不正确"))}}},function(t,e,n){var i=n(96),o=n(97),a={}.hasOwnProperty;t.exports={YEEPAY_WAP_URL:"https://ok.yeepay.com/paymobile/api/pay/request",YEEPAY_WAP_TEST_URL:"http://mobiletest.yeepay.com/paymobile/api/pay/request",handleCharge:function(t){for(var e=t.channel,n=t.credential[e],r=["merchantaccount","encryptkey","data"],s=0;s<r.length;s++)if(!a.call(n,r[s]))return void o.innerCallback("fail",o.error("invalid_credential","missing_field_"+r[s]));var l;l=a.call(n,"mode")&&"test"==n.mode?this.YEEPAY_WAP_TEST_URL:this.YEEPAY_WAP_URL,i.redirectTo(l+"?"+i.stringifyData(n,e,!0))}}},function(t,e,n){var i=n(110),o={}.hasOwnProperty;!function(){var e={},n={};n.PADCHAR="=",n.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n.makeDOMException=function(){try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(t){var e=new Error("DOM Exception 5");return e.code=e.number=5,e.name=e.description="INVALID_CHARACTER_ERR",e.toString=function(){return"Error: "+e.name+": "+e.message},e}},n.getbyte64=function(t,e){var i=n.ALPHA.indexOf(t.charAt(e));if(i===-1)throw n.makeDOMException();return i},n.decode=function(t){t=""+t;var e,i,o,a=n.getbyte64,r=t.length;if(0===r)return t;if(r%4!==0)throw n.makeDOMException();e=0,t.charAt(r-1)===n.PADCHAR&&(e=1,t.charAt(r-2)===n.PADCHAR&&(e=2),r-=4);var s=[];for(i=0;i<r;i+=4)o=a(t,i)<<18|a(t,i+1)<<12|a(t,i+2)<<6|a(t,i+3),s.push(String.fromCharCode(o>>16,o>>8&255,255&o));switch(e){case 1:o=a(t,i)<<18|a(t,i+1)<<12|a(t,i+2)<<6,s.push(String.fromCharCode(o>>16,o>>8&255));break;case 2:o=a(t,i)<<18|a(t,i+1)<<12,s.push(String.fromCharCode(o>>16))}return s.join("")},n.getbyte=function(t,e){var i=t.charCodeAt(e);if(i>255)throw n.makeDOMException();return i},n.encode=function(t){if(1!==arguments.length)throw new SyntaxError("Not enough arguments");var e,i,o=n.PADCHAR,a=n.ALPHA,r=n.getbyte,s=[];t=""+t;var l=t.length-t.length%3;if(0===t.length)return t;for(e=0;e<l;e+=3)i=r(t,e)<<16|r(t,e+1)<<8|r(t,e+2),s.push(a.charAt(i>>18)),s.push(a.charAt(i>>12&63)),s.push(a.charAt(i>>6&63)),s.push(a.charAt(63&i));switch(t.length-l){case 1:i=r(t,e)<<16,s.push(a.charAt(i>>18)+a.charAt(i>>12&63)+o+o);break;case 2:i=r(t,e)<<16|r(t,e+1)<<8,s.push(a.charAt(i>>18)+a.charAt(i>>12&63)+a.charAt(i>>6&63)+o)}return s.join("")},e.url="pay.htm",e.pay=function(t){var a=encodeURIComponent(n.encode(t));o.call(i,"APURL")&&(e.url=i.APURL),location.href=e.url+"?goto="+a},e.decode=function(t){return n.decode(decodeURIComponent(t))},t.exports=e}()},function(t,e,n){var i=n(96),o=n(110),a=n(115),r={seperator:"###",limit:1,report_url:"https://statistics.pingxx.com/one_stats",timeout:100},s=function(t,e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=t.substr(0).match(n);return null!==i?unescape(i[2]):null},l=function(){return navigator.userAgent},d=function(){return window.location.host};r.store=function(t){if("undefined"!=typeof localStorage&&null!==localStorage){var e=this,n={};n.app_id=t.app_id||o.app_id||"app_not_defined",n.ch_id=t.ch_id||"",n.channel=t.channel||"",n.type=t.type||"",n.user_agent=l(),n.host=d(),n.time=(new Date).getTime(),n.puid=o.puid;var i="app_id="+n.app_id+"&channel="+n.channel+"&ch_id="+n.ch_id+"&host="+n.host+"&time="+n.time+"&type="+n.type+"&user_agent="+n.user_agent+"&puid="+n.puid,a=i;null!==localStorage.getItem("PPP_ONE_STATS")&&0!==localStorage.getItem("PPP_ONE_STATS").length&&(a=localStorage.getItem("PPP_ONE_STATS")+e.seperator+i);try{localStorage.setItem("PPP_ONE_STATS",a)}catch(r){}}},r.send=function(){if("undefined"!=typeof localStorage&&null!==localStorage){var t=this,e=localStorage.getItem("PPP_ONE_STATS");if(!(null===e||e.split(t.seperator).length<t.limit))try{for(var n=[],o=e.split(t.seperator),r=a(o.join("&")),l=0;l<o.length;l++)n.push({app_id:s(o[l],"app_id"),channel:s(o[l],"channel"),ch_id:s(o[l],"ch_id"),host:s(o[l],"host"),time:s(o[l],"time"),type:s(o[l],"type"),user_agent:s(o[l],"user_agent"),puid:s(o[l],"puid")});i.request(t.report_url,"POST",n,function(t,e){200==e&&localStorage.removeItem("PPP_ONE_STATS")},void 0,{"X-Pingpp-Report-Token":r})}catch(d){}}},r.report=function(t){var e=this;e.store(t),setTimeout(function(){e.send()},e.timeout)},t.exports=r},function(t,e){!function(){function e(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n}function n(t,e){return t<<e|t>>>32-e}function i(t,i,o,a,r,s){return e(n(e(e(i,t),e(a,s)),r),o)}function o(t,e,n,o,a,r,s){return i(e&n|~e&o,t,e,a,r,s)}function a(t,e,n,o,a,r,s){return i(e&o|n&~o,t,e,a,r,s)}function r(t,e,n,o,a,r,s){return i(e^n^o,t,e,a,r,s)}function s(t,e,n,o,a,r,s){return i(n^(e|~o),t,e,a,r,s)}function l(t,n){t[n>>5]|=128<<n%32,t[(n+64>>>9<<4)+14]=n;var i,l,d,c,p,f=1732584193,u=-271733879,v=-1732584194,h=271733878;for(i=0;i<t.length;i+=16)l=f,d=u,c=v,p=h,f=o(f,u,v,h,t[i],7,-680876936),h=o(h,f,u,v,t[i+1],12,-389564586),v=o(v,h,f,u,t[i+2],17,606105819),u=o(u,v,h,f,t[i+3],22,-1044525330),f=o(f,u,v,h,t[i+4],7,-176418897),h=o(h,f,u,v,t[i+5],12,1200080426),v=o(v,h,f,u,t[i+6],17,-1473231341),u=o(u,v,h,f,t[i+7],22,-45705983),f=o(f,u,v,h,t[i+8],7,1770035416),h=o(h,f,u,v,t[i+9],12,-1958414417),v=o(v,h,f,u,t[i+10],17,-42063),u=o(u,v,h,f,t[i+11],22,-1990404162),f=o(f,u,v,h,t[i+12],7,1804603682),h=o(h,f,u,v,t[i+13],12,-40341101),v=o(v,h,f,u,t[i+14],17,-1502002290),u=o(u,v,h,f,t[i+15],22,1236535329),f=a(f,u,v,h,t[i+1],5,-165796510),h=a(h,f,u,v,t[i+6],9,-1069501632),v=a(v,h,f,u,t[i+11],14,643717713),u=a(u,v,h,f,t[i],20,-373897302),f=a(f,u,v,h,t[i+5],5,-701558691),h=a(h,f,u,v,t[i+10],9,38016083),v=a(v,h,f,u,t[i+15],14,-660478335),u=a(u,v,h,f,t[i+4],20,-405537848),f=a(f,u,v,h,t[i+9],5,568446438),h=a(h,f,u,v,t[i+14],9,-1019803690),v=a(v,h,f,u,t[i+3],14,-187363961),u=a(u,v,h,f,t[i+8],20,1163531501),f=a(f,u,v,h,t[i+13],5,-1444681467),h=a(h,f,u,v,t[i+2],9,-51403784),v=a(v,h,f,u,t[i+7],14,1735328473),u=a(u,v,h,f,t[i+12],20,-1926607734),f=r(f,u,v,h,t[i+5],4,-378558),h=r(h,f,u,v,t[i+8],11,-2022574463),v=r(v,h,f,u,t[i+11],16,1839030562),u=r(u,v,h,f,t[i+14],23,-35309556),f=r(f,u,v,h,t[i+1],4,-1530992060),h=r(h,f,u,v,t[i+4],11,1272893353),v=r(v,h,f,u,t[i+7],16,-155497632),u=r(u,v,h,f,t[i+10],23,-1094730640),f=r(f,u,v,h,t[i+13],4,681279174),h=r(h,f,u,v,t[i],11,-358537222),v=r(v,h,f,u,t[i+3],16,-722521979),u=r(u,v,h,f,t[i+6],23,76029189),f=r(f,u,v,h,t[i+9],4,-640364487),h=r(h,f,u,v,t[i+12],11,-421815835),v=r(v,h,f,u,t[i+15],16,530742520),u=r(u,v,h,f,t[i+2],23,-995338651),f=s(f,u,v,h,t[i],6,-198630844),h=s(h,f,u,v,t[i+7],10,1126891415),v=s(v,h,f,u,t[i+14],15,-1416354905),u=s(u,v,h,f,t[i+5],21,-57434055),f=s(f,u,v,h,t[i+12],6,1700485571),h=s(h,f,u,v,t[i+3],10,-1894986606),v=s(v,h,f,u,t[i+10],15,-1051523),u=s(u,v,h,f,t[i+1],21,-2054922799),f=s(f,u,v,h,t[i+8],6,1873313359),h=s(h,f,u,v,t[i+15],10,-30611744),v=s(v,h,f,u,t[i+6],15,-1560198380),u=s(u,v,h,f,t[i+13],21,1309151649),f=s(f,u,v,h,t[i+4],6,-145523070),h=s(h,f,u,v,t[i+11],10,-1120210379),v=s(v,h,f,u,t[i+2],15,718787259),u=s(u,v,h,f,t[i+9],21,-343485551),f=e(f,l),u=e(u,d),v=e(v,c),h=e(h,p);return[f,u,v,h]}function d(t){var e,n="";for(e=0;e<32*t.length;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function c(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;for(e=0;e<8*t.length;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function p(t){return d(l(c(t),8*t.length))}function f(t,e){var n,i,o=c(t),a=[],r=[];for(a[15]=r[15]=void 0,o.length>16&&(o=l(o,8*t.length)),n=0;n<16;n+=1)a[n]=909522486^o[n],r[n]=1549556828^o[n];return i=l(a.concat(c(e)),512+8*e.length),d(l(r.concat(i),640))}function u(t){var e,n,i="0123456789abcdef",o="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),o+=i.charAt(e>>>4&15)+i.charAt(15&e);return o}function v(t){return unescape(encodeURIComponent(t))}function h(t){return p(v(t))}function m(t){return u(h(t))}function b(t,e){return f(v(t),v(e))}function g(t,e){return u(b(t,e))}function _(t,e,n){return e?n?b(e,t):g(e,t):n?h(t):m(t)}t.exports=_}()},function(t,e,n){var i=n(110),o=n(96),a=n(114);t.exports={SRC_URL:"https://cookie.pingxx.com",init:function(){var t=this;o.documentReady(function(){t.initPuid()})},initPuid:function(){if("undefined"!=typeof window&&"undefined"!=typeof localStorage){var t=localStorage.getItem("pingpp_uid");if(null===t){t=o.randomString();try{localStorage.setItem("pingpp_uid",t)}catch(e){}}if(i.puid=t,!document.getElementById("p_analyse_iframe")){var n=document.createElement("iframe");n.id="p_analyse_iframe",n.src=this.SRC_URL+"/?puid="+t,n.style.display="none",document.body.appendChild(n)}setTimeout(function(){a.send()},0)}}}},function(t,e,n){var i,o;i=n(118),o=n(119),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={name:"ConsigneeInfoWithLogisticsView",props:["consigneeItem","canAddLogistics","index"],data:function(){return{}},methods:{clickToAddLogistics:function(){this.$dispatch("click-to-add-logistics",this.consigneeItem)}}}},function(t,e){t.exports=' <div class="panel panel-default"> <div class=panel-body> <div class=row> <div class=col-lg-6> <h4>收货人{{index + 1}}</h4> <div class=row style="margin: 0"> <label class=pull-left>收货人姓名：</label> <p class=pull-left style="width: 80%">{{consigneeItem.name}}</p> </div> <div class=row style="margin: 0"> <label class=pull-left>手机号码：</label> <p class=pull-left style="width: 80%">{{consigneeItem.phone}}</p> </div> <div class=row style="margin: 0"> <label class=pull-left>收货地址：</label> <p class=pull-left style="width: 80%">{{consigneeItem.full_address}}</p> </div> <div class=row style="margin: 0" v-if=consigneeItem.post_code> <label class=pull-left>邮编：</label> <p class=pull-left style="width: 80%">{{consigneeItem.post_code}}</p> </div> <div class=row style="margin: 0" v-if=consigneeItem.remark> <label class=pull-left>收货备注：</label> <p class=pull-left style="width: 80%">{{consigneeItem.remark}}</p> </div> </div> <div class=col-lg-6> <a class="pull-right btn btn-info btn-sm" v-if=canAddLogistics @click=clickToAddLogistics>录入</a> <h4>物流信息</h4> <p v-if="consigneeItem.logistics.length === 0">未发货，暂无物流信息</p> <template v-else> <div class=row style="margin: 0" v-for="item of consigneeItem.logistics"> <p class=pull-left>{{$index + 1}}、</p> <p class=pull-left style="width: 90%">{{item.delivery_method}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{item.express}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{item.express_order_id}}<br>{{item.cost | realPrice}}元&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{item.create_time | dateFormat}}录入<br>{{item.remark}}</p> </div> </template> </div> </div> </div> </div> '},function(t,e,n){var i,o;n(121),i=n(123),o=n(124),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},function(t,e,n){var i=n(122);"string"==typeof i&&(i=[[t.id,i,""]]);n(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(41)(),e.push([t.id,".modal[_v-f72f98a6]{height:100%}.modal-dialog[_v-f72f98a6]{top:30%}","",{version:3,sources:["/./src/views/order/comp/editExtraAmountDialog.vue.style"],names:[],mappings:"AA2GA,oBACA,WAAA,CACA,AAEA,2BACA,OAAA,CACA",file:"editExtraAmountDialog.vue",sourcesContent:['<!-- editExtraAmountDialog.vue -->\n<template>\n    <div class="modal" v-show="show">\n    \t<div class="modal-dialog" style="width:400px;">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <button type="button" class="close" @click="closeDialog">&times;</button>\n                    <h4 class="modal-title">订单补充金额</h4>\n                </div>\n                <div class="modal-body">\n                    <h5>补充金额必须大于{{data.minExtraAmount | realPrice}}元</h5>\n                \t<form class="form-horizontal">\n\t\t                <div class="form-group">\n\t\t                    <label class="col-lg-4 control-label" for="extraAmount">补充金额<span class="text-danger">*</span>：</label>\n\t\t                    <div class="col-lg-8">\n\t\t                        <input class="form-control input-sm" id="extraAmount" type="text" v-model="data.extraAmount | priceFilter">\n\t\t                    </div>\n\t\t                </div>\n\t\t                <div class="form-group">\n\t\t                    <label class="col-lg-4 control-label" for="extraAmountRemark">备注：</label>\n\t\t                    <div class="col-lg-8">\n\t\t                        <input class="form-control input-sm" id="extraAmountRemark" type="text" v-model="data.extraAmountRemark">\n\t\t                    </div>\n\t\t                </div>\n\t\t            </form>\n                </div>\n                <div class="modal-footer">\n                    <button type="button" class="btn btn-primary" :disabled="!buttonEnabled" @click="confirmSubmit">确定</button>\n                </div>\n            </div>\n        </div>\n        <popup-tips :show.sync="dataForPopupTips.show" :tips-type="dataForPopupTips.type" :tips-title="dataForPopupTips.title" :tips-content="dataForPopupTips.content"></popup-tips>\n    </div>\n</template>\n\n<script>\nimport popupTips from \'../../../components/popupTips.vue\'\nimport { callback } from \'../../../store\'\nimport { orderValidator } from \'../../../store/dataValidator.js\'\n\nexport default {\n    name: \'EditExtraAmountDialogView\',\n    components: {\n        popupTips,\n    },\n    props: [\'show\', \'data\'],\n    data() {\n        return {\n        \tbuttonEnabled: true,\n            dataForPopupTips: {\n                show: false,\n                type: \'danger\',\n                title: \'\',\n                content: \'\',\n            },\n        }\n    },\n    methods: {\n    \tvalidateExtraAmount() {\n            var result = orderValidator.validateExtraAmount(this.data.extraAmount, this.data.minExtraAmount);\n            if (!result.ok) {\n                return result.errorMsg;\n            }\n            return;\n        },\n        confirmSubmit() {\n            if (this.buttonEnabled) {\n                this.buttonEnabled = false;\n                this.editExtraAmount();\n            }\n        },\n    \teditExtraAmount() {\n            var result = this.validateExtraAmount();\n            if(result) {\n                this.dataForPopupTips.show = true;\n                this.dataForPopupTips.title = \'输入有误\';\n                this.dataForPopupTips.content = result;\n                this.buttonEnabled = true;\n                return;\n            }\n            var data = {\n                freight: this.data.extraAmount,\n                freight_remark: this.data.extraAmountRemark,\n            };\n            var url = \'/api/v2/admin/orders/update-freight?order_id=\' + this.data.orderId;\n            this.$http.put(url, data)\n            .then((response) => {\n                if(!response.data.result || response.data.result === 0) {\n                    this.show = false;\n                    this.$dispatch(\'edit-extra-amount\');\n                } else {\n                    callback.success(response.data);\n                }\n                this.buttonEnabled = true;\n            },(response) => {\n                callback.error(response);\n                this.buttonEnabled = true;\n            });\n        },\n    \tcloseDialog() {\n            this.show = false;\n        },\n    }\n}\n</script>\n\n<style scoped>\n.modal {\n    height: 100%;\n}\n\n.modal-dialog {\n    top: 30%;\n}\n\n</style>'],
sourceRoot:"webpack://"}])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(82),a=i(o),r=n(48),s=n(87);e["default"]={name:"EditExtraAmountDialogView",components:{popupTips:a["default"]},props:["show","data"],data:function(){return{buttonEnabled:!0,dataForPopupTips:{show:!1,type:"danger",title:"",content:""}}},methods:{validateExtraAmount:function(){var t=s.orderValidator.validateExtraAmount(this.data.extraAmount,this.data.minExtraAmount);if(!t.ok)return t.errorMsg},confirmSubmit:function(){this.buttonEnabled&&(this.buttonEnabled=!1,this.editExtraAmount())},editExtraAmount:function(){var t=this,e=this.validateExtraAmount();if(e)return this.dataForPopupTips.show=!0,this.dataForPopupTips.title="输入有误",this.dataForPopupTips.content=e,void(this.buttonEnabled=!0);var n={freight:this.data.extraAmount,freight_remark:this.data.extraAmountRemark},i="/api/v2/admin/orders/update-freight?order_id="+this.data.orderId;this.$http.put(i,n).then(function(e){e.data.result&&0!==e.data.result?r.callback.success(e.data):(t.show=!1,t.$dispatch("edit-extra-amount")),t.buttonEnabled=!0},function(e){r.callback.error(e),t.buttonEnabled=!0})},closeDialog:function(){this.show=!1}}}},function(t,e){t.exports=' <div class=modal v-show=show _v-f72f98a6=""> <div class=modal-dialog style=width:400px _v-f72f98a6=""> <div class=modal-content _v-f72f98a6=""> <div class=modal-header _v-f72f98a6=""> <button type=button class=close @click=closeDialog _v-f72f98a6="">×</button> <h4 class=modal-title _v-f72f98a6="">订单补充金额</h4> </div> <div class=modal-body _v-f72f98a6=""> <h5 _v-f72f98a6="">补充金额必须大于{{data.minExtraAmount | realPrice}}元</h5> <form class=form-horizontal _v-f72f98a6=""> <div class=form-group _v-f72f98a6=""> <label class="col-lg-4 control-label" for=extraAmount _v-f72f98a6="">补充金额<span class=text-danger _v-f72f98a6="">*</span>：</label> <div class=col-lg-8 _v-f72f98a6=""> <input class="form-control input-sm" id=extraAmount type=text v-model="data.extraAmount | priceFilter" _v-f72f98a6=""> </div> </div> <div class=form-group _v-f72f98a6=""> <label class="col-lg-4 control-label" for=extraAmountRemark _v-f72f98a6="">备注：</label> <div class=col-lg-8 _v-f72f98a6=""> <input class="form-control input-sm" id=extraAmountRemark type=text v-model=data.extraAmountRemark _v-f72f98a6=""> </div> </div> </form> </div> <div class=modal-footer _v-f72f98a6=""> <button type=button class="btn btn-primary" :disabled=!buttonEnabled @click=confirmSubmit _v-f72f98a6="">确定</button> </div> </div> </div> <popup-tips :show.sync=dataForPopupTips.show :tips-type=dataForPopupTips.type :tips-title=dataForPopupTips.title :tips-content=dataForPopupTips.content _v-f72f98a6=""></popup-tips> </div> '},function(t,e,n){var i,o;n(126),i=n(128),o=n(129),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},function(t,e,n){var i=n(127);"string"==typeof i&&(i=[[t.id,i,""]]);n(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(41)(),e.push([t.id,".modal[_v-9c5853bc]{height:100%}.modal-dialog[_v-9c5853bc]{top:30%}","",{version:3,sources:["/./src/views/order/comp/editExtraCostDialog.vue.style"],names:[],mappings:"AA0GA,oBACA,WAAA,CACA,AAEA,2BACA,OAAA,CACA",file:"editExtraCostDialog.vue",sourcesContent:['<!-- editExtraCostDialog.vue -->\n<template>\n    <div class="modal" v-show="show">\n    \t<div class="modal-dialog" style="width:400px;">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <button type="button" class="close" @click="closeDialog">&times;</button>\n                    <h4 class="modal-title">额外成本</h4>\n                </div>\n                <div class="modal-body">\n                    <form class="form-horizontal">\n\t\t                <div class="form-group">\n\t\t                    <label class="col-lg-4 control-label" for="extraCost">额外成本<span class="text-danger">*</span>：</label>\n\t\t                    <div class="col-lg-8">\n\t\t                        <input class="form-control input-sm" id="extraCost" type="text" v-model="data.extra_cost | priceFilter">\n\t\t                    </div>\n\t\t                </div>\n\t\t                <div class="form-group">\n\t\t                    <label class="col-lg-4 control-label" for="extraCostRemark">备注：</label>\n\t\t                    <div class="col-lg-8">\n\t\t                        <input class="form-control input-sm" id="extraCostRemark" type="text" v-model="data.extra_cost_remark">\n\t\t                    </div>\n\t\t                </div>\n\t\t            </form>\n                </div>\n                <div class="modal-footer">\n                    <button type="button" class="btn btn-primary" :disabled="!buttonEnabled" @click="confirmSubmit">确定</button>\n                </div>\n            </div>\n        </div>\n        <popup-tips :show.sync="dataForPopupTips.show" :tips-type="dataForPopupTips.type" :tips-title="dataForPopupTips.title" :tips-content="dataForPopupTips.content"></popup-tips>\n    </div>\n</template>\n\n<script>\nimport popupTips from \'../../../components/popupTips.vue\'\nimport { callback } from \'../../../store\'\nimport { orderValidator } from \'../../../store/dataValidator.js\'\n\nexport default {\n    name: \'EditExtraCostDialogView\',\n    components: {\n        popupTips,\n    },\n    props: [\'show\', \'data\'],\n    data() {\n        return {\n        \tbuttonEnabled: true,\n            dataForPopupTips: {\n                show: false,\n                type: \'danger\',\n                title: \'\',\n                content: \'\',\n            },\n        }\n    },\n    methods: {\n    \tvalidateExtraCost() {\n            var result = orderValidator.validateExtraCost(this.data.extra_cost);\n            if (!result.ok) {\n                return result.errorMsg;\n            }\n            return;\n        },\n        confirmSubmit() {\n            if (this.buttonEnabled) {\n                this.buttonEnabled = false;\n                this.editExtraCost();\n            }\n        },\n    \teditExtraCost() {\n            var result = this.validateExtraCost();\n            if(result) {\n                this.dataForPopupTips.show = true;\n                this.dataForPopupTips.title = \'输入有误\';\n                this.dataForPopupTips.content = result;\n                this.buttonEnabled = true;\n                return;\n            }\n            var data = {\n                extra_cost: this.data.extra_cost,\n                extra_cost_remark: this.data.extra_cost_remark,\n            };\n            var url = \'/api/v2/admin/orders/update-extra-cost?order_id=\' + this.data.orderId;\n            this.$http.put(url, data)\n            .then((response) => {\n                if(!response.data.result || response.data.result === 0) {\n                    this.show = false;\n                    this.$dispatch(\'edit-extra-cost\');\n                } else {\n                    callback.success(response.data);\n                }\n                this.buttonEnabled = true;\n            },(response) => {\n                callback.error(response);\n                this.buttonEnabled = true;\n            });\n        },\n    \tcloseDialog() {\n            this.show = false;\n        },\n    }\n}\n</script>\n\n<style scoped>\n.modal {\n    height: 100%;\n}\n\n.modal-dialog {\n    top: 30%;\n}\n\n</style>'],sourceRoot:"webpack://"}])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(82),a=i(o),r=n(48),s=n(87);e["default"]={name:"EditExtraCostDialogView",components:{popupTips:a["default"]},props:["show","data"],data:function(){return{buttonEnabled:!0,dataForPopupTips:{show:!1,type:"danger",title:"",content:""}}},methods:{validateExtraCost:function(){var t=s.orderValidator.validateExtraCost(this.data.extra_cost);if(!t.ok)return t.errorMsg},confirmSubmit:function(){this.buttonEnabled&&(this.buttonEnabled=!1,this.editExtraCost())},editExtraCost:function(){var t=this,e=this.validateExtraCost();if(e)return this.dataForPopupTips.show=!0,this.dataForPopupTips.title="输入有误",this.dataForPopupTips.content=e,void(this.buttonEnabled=!0);var n={extra_cost:this.data.extra_cost,extra_cost_remark:this.data.extra_cost_remark},i="/api/v2/admin/orders/update-extra-cost?order_id="+this.data.orderId;this.$http.put(i,n).then(function(e){e.data.result&&0!==e.data.result?r.callback.success(e.data):(t.show=!1,t.$dispatch("edit-extra-cost")),t.buttonEnabled=!0},function(e){r.callback.error(e),t.buttonEnabled=!0})},closeDialog:function(){this.show=!1}}}},function(t,e){t.exports=' <div class=modal v-show=show _v-9c5853bc=""> <div class=modal-dialog style=width:400px _v-9c5853bc=""> <div class=modal-content _v-9c5853bc=""> <div class=modal-header _v-9c5853bc=""> <button type=button class=close @click=closeDialog _v-9c5853bc="">×</button> <h4 class=modal-title _v-9c5853bc="">额外成本</h4> </div> <div class=modal-body _v-9c5853bc=""> <form class=form-horizontal _v-9c5853bc=""> <div class=form-group _v-9c5853bc=""> <label class="col-lg-4 control-label" for=extraCost _v-9c5853bc="">额外成本<span class=text-danger _v-9c5853bc="">*</span>：</label> <div class=col-lg-8 _v-9c5853bc=""> <input class="form-control input-sm" id=extraCost type=text v-model="data.extra_cost | priceFilter" _v-9c5853bc=""> </div> </div> <div class=form-group _v-9c5853bc=""> <label class="col-lg-4 control-label" for=extraCostRemark _v-9c5853bc="">备注：</label> <div class=col-lg-8 _v-9c5853bc=""> <input class="form-control input-sm" id=extraCostRemark type=text v-model=data.extra_cost_remark _v-9c5853bc=""> </div> </div> </form> </div> <div class=modal-footer _v-9c5853bc=""> <button type=button class="btn btn-primary" :disabled=!buttonEnabled @click=confirmSubmit _v-9c5853bc="">确定</button> </div> </div> </div> <popup-tips :show.sync=dataForPopupTips.show :tips-type=dataForPopupTips.type :tips-title=dataForPopupTips.title :tips-content=dataForPopupTips.content _v-9c5853bc=""></popup-tips> </div> '},function(t,e,n){var i,o;n(131),i=n(133),o=n(134),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},function(t,e,n){var i=n(132);"string"==typeof i&&(i=[[t.id,i,""]]);n(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(41)(),e.push([t.id,".modal[_v-519c6a70]{height:100%}","",{version:3,sources:["/./src/views/order/comp/applyInvoiceDialog.vue.style"],names:[],mappings:"AAuKA,oBACA,WAAA,CACA",file:"applyInvoiceDialog.vue",sourcesContent:['<!-- applyInvoiceDialog.vue -->\n<template>\n    <div class="modal" v-show="show">\n        <div class="modal-dialog" style="width:400px; top:30%;" v-show="!showInvoiceInfoDialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <button type="button" class="close" @click="closeDialog">&times;</button>\n                    <h4 class="modal-title">开票申请</h4>\n                </div>\n                <div class="modal-body">\n                    <h5>订单剩余未开票金额：{{maxApplyAmount | realPrice}}元</h5>\n                    <form class="form-horizontal">\n                        <div class="form-group">\n                            <label class="col-lg-4 control-label" for="applyInvoiceAmount">使用额度<span class="text-danger">*</span>：</label>\n                            <div class="col-lg-8">\n                                <input class="form-control input-sm" id="applyInvoiceAmount" type="text" v-model="applyInvoiceAmount | priceFilter">\n                            </div>\n                        </div>\n                    </form>\n                </div>\n                <div class="modal-footer">\n                    <button type="button" class="btn btn-primary" @click="clickToNextStep">下一步</button>\n                </div>\n            </div>\n        </div>\n        <div class="modal-dialog" style="width:1000px; top:10%;" v-show="showInvoiceInfoDialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <button type="button" class="close" @click="closeDialog">&times;</button>\n                    <h4 class="modal-title">开票信息</h4>\n                </div>\n                <div class="modal-body" style="height:480px;overflow-y:auto;">\n                    <invoice-info-component :invoice-data="invoiceInfo" :consignees="[]">\n                    </invoice-info-component>\n                </div>\n                <div class="modal-footer">\n                    <button type="button" class="btn btn-primary" :disabled="!buttonEnabled" @click="confirmSubmit">确定</button>\n                </div>\n            </div>\n        </div>\n        <popup-tips :show.sync="dataForPopupTips.show" :tips-type="dataForPopupTips.type" :tips-title="dataForPopupTips.title" :tips-content="dataForPopupTips.content"></popup-tips>\n    </div>\n</template>\n\n<script>\nimport invoiceInfoComponent from \'./invoiceInfoComponent.vue\'\nimport popupTips from \'../../../components/popupTips.vue\'\nimport { callback } from \'../../../store\'\nimport { orderValidator } from \'../../../store/dataValidator.js\'\n\nexport default {\n    name: \'ApplyInvoiceDialogView\',\n    components: {\n        invoiceInfoComponent,\n        popupTips,\n    },\n    data() {\n        return {\n            showInvoiceInfoDialog: false,\n            applyInvoiceAmount: \'\',\n            buttonEnabled: true,\n            dataForPopupTips: {\n                show: false,\n                type: \'danger\',\n                title: \'\',\n                content: \'\',\n            },\n        }\n    },\n    props: [\'show\', \'orderIds\', \'invoiceInfo\', \'maxApplyAmount\'],\n    methods: {\n        validateApplyInvoiceAmount() {\n            var result = orderValidator.validateApplyInvoiceAmount(this.applyInvoiceAmount, this.maxApplyAmount);\n            if (!result.ok) {\n                return result.errorMsg;\n            }\n            return;\n        },\n        validateInvoiceInfo() {\n            var result = orderValidator.validateInvoiceAmount(this.invoiceInfo.amount);\n            if (!result.ok) {\n                return result.errorMsg;\n            }\n            var infoName = ["开票内容", "开票抬头", "发票收货人", "发票收货人联系方式", "发票收货人收货地址"];\n            var infoData = [this.invoiceInfo.content, this.invoiceInfo.title, this.invoiceInfo.consignee_name, this.invoiceInfo.consignee_phone, this.invoiceInfo.address];\n            for (let i = 0; i < infoName.length; i++) {\n                result = orderValidator.validateInvoiceItem(infoName[i], infoData[i]);\n                if (!result.ok) {\n                    return result.errorMsg;\n                }\n            }\n            if (this.invoiceInfo.zengzhishui) {\n                infoName = ["发票信息中纳税人识别号", "发票信息中注册地址", "发票信息中电话", "发票信息中开户行", "发票信息中账号"];\n                infoData = [this.invoiceInfo.zengzhishui.identifier, this.invoiceInfo.zengzhishui.address, this.invoiceInfo.zengzhishui.phone, this.invoiceInfo.zengzhishui.account, this.invoiceInfo.zengzhishui.bank];\n                for (let i = 0; i < infoName.length; i++) {\n                    result = orderValidator.validateInvoiceItem(infoName[i], infoData[i]);\n                    if (!result.ok) {\n                        return result.errorMsg;\n                    }\n                }\n            }\n            return;\n        },\n        clickToNextStep() {\n            var result = this.validateApplyInvoiceAmount();\n            if (result) {\n                this.dataForPopupTips.show = true;\n                this.dataForPopupTips.title = \'输入有误\';\n                this.dataForPopupTips.content = result;\n                return;\n            }\n            this.showInvoiceInfoDialog = true;\n        },\n        confirmSubmit() {\n            if (this.buttonEnabled) {\n                this.buttonEnabled = false;\n                this.applyInvoice();\n            }\n        },\n        applyInvoice() {\n            var result = this.validateInvoiceInfo();\n            if (result) {\n                this.dataForPopupTips.show = true;\n                this.dataForPopupTips.title = \'输入有误\';\n                this.dataForPopupTips.content = result;\n                this.buttonEnabled = true;\n                return;\n            }\n            var params = \'\';\n            for (let i = 0; i < this.orderIds.length; i++) {\n                if (i !== 0) {\n                    params += "&order_id=" + this.orderIds[i];\n                } else {\n                    params += "order_id=" + this.orderIds[i];\n                }\n            }\n            var data = {\n                amount: this.applyInvoiceAmount,\n                data: this.invoiceInfo,\n            };\n            var url = \'/api/v2/admin/invoices/create?\' + params;\n            this.$http.post(url, data)\n            .then((response) => {\n                if(!response.data.result || response.data.result === 0) {\n                    this.applyInvoiceAmount = \'\';\n                    this.show = false;\n                    this.showInvoiceInfoDialog = false;\n                    this.$dispatch(\'apply-invoice\');\n                } else {\n                    callback.success(response.data);\n                }\n                this.buttonEnabled = true;\n            },(response) => {\n                callback.error(response);\n                this.buttonEnabled = true;\n            });\n        },\n        closeDialog() {\n            this.applyInvoiceAmount = \'\';\n            this.show = false;\n            this.showInvoiceInfoDialog = false;\n        },\n    }\n}\n</script>\n\n<style scoped>\n.modal {\n    height: 100%;\n}\n</style>'],sourceRoot:"webpack://"}])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(66),a=i(o),r=n(82),s=i(r),l=n(48),d=n(87);e["default"]={name:"ApplyInvoiceDialogView",components:{invoiceInfoComponent:a["default"],popupTips:s["default"]},data:function(){return{showInvoiceInfoDialog:!1,applyInvoiceAmount:"",buttonEnabled:!0,dataForPopupTips:{show:!1,type:"danger",title:"",content:""}}},props:["show","orderIds","invoiceInfo","maxApplyAmount"],methods:{validateApplyInvoiceAmount:function(){var t=d.orderValidator.validateApplyInvoiceAmount(this.applyInvoiceAmount,this.maxApplyAmount);if(!t.ok)return t.errorMsg},validateInvoiceInfo:function(){var t=d.orderValidator.validateInvoiceAmount(this.invoiceInfo.amount);if(!t.ok)return t.errorMsg;for(var e=["开票内容","开票抬头","发票收货人","发票收货人联系方式","发票收货人收货地址"],n=[this.invoiceInfo.content,this.invoiceInfo.title,this.invoiceInfo.consignee_name,this.invoiceInfo.consignee_phone,this.invoiceInfo.address],i=0;i<e.length;i++)if(t=d.orderValidator.validateInvoiceItem(e[i],n[i]),!t.ok)return t.errorMsg;if(this.invoiceInfo.zengzhishui){e=["发票信息中纳税人识别号","发票信息中注册地址","发票信息中电话","发票信息中开户行","发票信息中账号"],n=[this.invoiceInfo.zengzhishui.identifier,this.invoiceInfo.zengzhishui.address,this.invoiceInfo.zengzhishui.phone,this.invoiceInfo.zengzhishui.account,this.invoiceInfo.zengzhishui.bank];for(var o=0;o<e.length;o++)if(t=d.orderValidator.validateInvoiceItem(e[o],n[o]),!t.ok)return t.errorMsg}},clickToNextStep:function(){var t=this.validateApplyInvoiceAmount();return t?(this.dataForPopupTips.show=!0,this.dataForPopupTips.title="输入有误",void(this.dataForPopupTips.content=t)):void(this.showInvoiceInfoDialog=!0)},confirmSubmit:function(){this.buttonEnabled&&(this.buttonEnabled=!1,this.applyInvoice())},applyInvoice:function(){var t=this,e=this.validateInvoiceInfo();if(e)return this.dataForPopupTips.show=!0,this.dataForPopupTips.title="输入有误",this.dataForPopupTips.content=e,void(this.buttonEnabled=!0);for(var n="",i=0;i<this.orderIds.length;i++)n+=0!==i?"&order_id="+this.orderIds[i]:"order_id="+this.orderIds[i];var o={amount:this.applyInvoiceAmount,data:this.invoiceInfo},a="/api/v2/admin/invoices/create?"+n;this.$http.post(a,o).then(function(e){e.data.result&&0!==e.data.result?l.callback.success(e.data):(t.applyInvoiceAmount="",t.show=!1,t.showInvoiceInfoDialog=!1,t.$dispatch("apply-invoice")),t.buttonEnabled=!0},function(e){l.callback.error(e),t.buttonEnabled=!0})},closeDialog:function(){this.applyInvoiceAmount="",this.show=!1,this.showInvoiceInfoDialog=!1}}}},function(t,e){t.exports=' <div class=modal v-show=show _v-519c6a70=""> <div class=modal-dialog style="width:400px; top:30%" v-show=!showInvoiceInfoDialog _v-519c6a70=""> <div class=modal-content _v-519c6a70=""> <div class=modal-header _v-519c6a70=""> <button type=button class=close @click=closeDialog _v-519c6a70="">×</button> <h4 class=modal-title _v-519c6a70="">开票申请</h4> </div> <div class=modal-body _v-519c6a70=""> <h5 _v-519c6a70="">订单剩余未开票金额：{{maxApplyAmount | realPrice}}元</h5> <form class=form-horizontal _v-519c6a70=""> <div class=form-group _v-519c6a70=""> <label class="col-lg-4 control-label" for=applyInvoiceAmount _v-519c6a70="">使用额度<span class=text-danger _v-519c6a70="">*</span>：</label> <div class=col-lg-8 _v-519c6a70=""> <input class="form-control input-sm" id=applyInvoiceAmount type=text v-model="applyInvoiceAmount | priceFilter" _v-519c6a70=""> </div> </div> </form> </div> <div class=modal-footer _v-519c6a70=""> <button type=button class="btn btn-primary" @click=clickToNextStep _v-519c6a70="">下一步</button> </div> </div> </div> <div class=modal-dialog style="width:1000px; top:10%" v-show=showInvoiceInfoDialog _v-519c6a70=""> <div class=modal-content _v-519c6a70=""> <div class=modal-header _v-519c6a70=""> <button type=button class=close @click=closeDialog _v-519c6a70="">×</button> <h4 class=modal-title _v-519c6a70="">开票信息</h4> </div> <div class=modal-body style=height:480px;overflow-y:auto _v-519c6a70=""> <invoice-info-component :invoice-data=invoiceInfo :consignees=[] _v-519c6a70=""> </invoice-info-component> </div> <div class=modal-footer _v-519c6a70=""> <button type=button class="btn btn-primary" :disabled=!buttonEnabled @click=confirmSubmit _v-519c6a70="">确定</button> </div> </div> </div> <popup-tips :show.sync=dataForPopupTips.show :tips-type=dataForPopupTips.type :tips-title=dataForPopupTips.title :tips-content=dataForPopupTips.content _v-519c6a70=""></popup-tips> </div> '},function(t,e,n){var i,o;n(136),i=n(138),o=n(139),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},function(t,e,n){var i=n(137);"string"==typeof i&&(i=[[t.id,i,""]]);n(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(41)(),e.push([t.id,".modal[_v-72321f45]{height:100%}.modal-dialog[_v-72321f45]{top:15%}","",{version:3,sources:["/./src/views/order/comp/payQrCodeDialog.vue.style"],names:[],mappings:"AAqEA,oBACA,WAAA,CACA,AAEA,2BACA,OAAA,CACA",file:"payQrCodeDialog.vue",sourcesContent:['<!-- payQrCodeDialog.vue -->\n<template>\n    <div class="modal" v-show="show">\n        <div class="modal-dialog" style="width:320px;">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <button type="button" class="close" @click="closeDialog">&times;</button>\n                    <h4 class="modal-title">{{title}}</h4>\n                </div>\n                <div class="modal-body">\n                \t<h4>应付金额：<span style="font-size:20px;color:#f54404">{{data.amountToPay | realPrice}}</span>元</h4>\n                \t<br>\n                \t<div id="qrcode_pay">\n                \t</div>\n                \t<br>\n                \t<p class="text-danger">{{description}}</p>\n                \t<p>支付完成后请手动刷新订单</p>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\nexport default {\n    name: \'payQrCodeDialogView\',\n    data() {\n        return {\n        }\n    },\n    computed: {\n        title() {\n            if (this.data.type === \'WECHAT_QR\') {\n                return \'微信扫码支付\';\n            } else {\n            \treturn \'支付宝扫码支付\';\n            }\n        },\n        description() {\n        \tif (this.data.type === \'WECHAT_QR\') {\n                return \'使用微信扫一扫，扫描二维码支付\';\n            } else {\n            \treturn \'使用支付宝扫一扫，扫描二维码支付\';\n            }\n        },\n    },\n    props: [\'show\', \'data\'],\n    watch: {\n    \tshow(val, oldVal) {\n            if (val) {\n            \t$("#qrcode_pay").html(\'\').qrcode({\n                    width: 280,\n                    height: 280,\n                    text: this.data.qrCodeUrl,\n                });\n            }\n        },\n    },\n    methods: {\n    \tcloseDialog() {\n            this.show = false;\n        },\n    },\n}\n\n</script>\n\n<style scoped>\n.modal {\n    height: 100%;\n}\n\n.modal-dialog {\n    top: 15%;\n}\n</style>'],sourceRoot:"webpack://"}])},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={name:"payQrCodeDialogView",data:function(){return{}},computed:{title:function(){return"WECHAT_QR"===this.data.type?"微信扫码支付":"支付宝扫码支付"},description:function(){return"WECHAT_QR"===this.data.type?"使用微信扫一扫，扫描二维码支付":"使用支付宝扫一扫，扫描二维码支付"}},props:["show","data"],watch:{show:function(t,e){t&&$("#qrcode_pay").html("").qrcode({width:280,height:280,text:this.data.qrCodeUrl})}},methods:{closeDialog:function(){this.show=!1}}}},function(t,e){t.exports=' <div class=modal v-show=show _v-72321f45=""> <div class=modal-dialog style=width:320px _v-72321f45=""> <div class=modal-content _v-72321f45=""> <div class=modal-header _v-72321f45=""> <button type=button class=close @click=closeDialog _v-72321f45="">×</button> <h4 class=modal-title _v-72321f45="">{{title}}</h4> </div> <div class=modal-body _v-72321f45=""> <h4 _v-72321f45="">应付金额：<span style=font-size:20px;color:#f54404 _v-72321f45="">{{data.amountToPay | realPrice}}</span>元</h4> <br _v-72321f45=""> <div id=qrcode_pay _v-72321f45=""> </div> <br _v-72321f45=""> <p class=text-danger _v-72321f45="">{{description}}</p> <p _v-72321f45="">支付完成后请手动刷新订单</p> </div> </div> </div> </div> '},function(t,e,n){var i,o;n(141),i=n(143),o=n(144),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},function(t,e,n){var i=n(142);"string"==typeof i&&(i=[[t.id,i,""]]);n(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(41)(),e.push([t.id,".modal[_v-5351c195]{height:100%}.modal-dialog[_v-5351c195]{top:20%}","",{version:3,sources:["/./src/views/order/comp/applyRefundDialog.vue.style"],names:[],mappings:"AA8IA,oBACA,WAAA,CACA,AAEA,2BACA,OAAA,CACA",file:"applyRefundDialog.vue",sourcesContent:['<!-- applyRefundDialog.vue -->\n<template>\n    <div class="modal" v-show="show">\n    \t<div class="modal-dialog">\n            <div class="modal-content">\n            \t<div class="modal-header">\n                    <button type="button" class="close" @click="closeDialog">&times;</button>\n                    <h4 class="modal-title">申请退款</h4>\n                </div>\n                <div class="modal-body">\n                    <h5>可退金额最多为{{data.maxRefundValue | realPrice}}元</h5>\n                    <form class="form-horizontal">\n                        <div class="form-group">\n                            <label class="col-lg-4 control-label" for="refundAmount">退款金额<span class="text-danger">*</span>：</label>\n                            <div class="col-lg-6">\n                                <input class="form-control input-sm" id="refundAmount" type="text" v-model="data.refundAmount | priceFilter">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="col-lg-4 control-label" for="refundMethod">退款渠道<span class="text-danger">*</span>：</label>\n                            <div class="col-lg-6">\n                                <select class="form-control input-sm" id="refundMethod" v-model="data.refundMethod">\n                                    <option value="BANK_TRANSFER">银行转账</option>\n                                    <option value="ALIPAY_TRANSFER">支付宝转账</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="col-lg-4 control-label" for="refundAccount">对方账号<span class="text-danger">*</span>：</label>\n                            <div class="col-lg-6">\n                                <input class="form-control input-sm" id="refundAccount" type="text" v-model="data.refundAccount">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="col-lg-4 control-label" for="refundName">对方名称：</label>\n                            <div class="col-lg-6">\n                                <input class="form-control input-sm" id="refundName" type="text" v-model="data.refundName">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="col-lg-4 control-label" for="refundReason">退款原因<span class="text-danger">*</span>：</label>\n                            <div class="col-lg-6">\n                                <input class="form-control input-sm" id="refundReason" type="text" v-model="data.refundReason">\n                            </div>\n                        </div>\n                    </form>\n                </div>\n                <div class="modal-footer">\n                    <button type="button" class="btn btn-primary" :disabled="!buttonEnabled" @click="confirmSubmit">确定</button>\n                </div>\n            </div>\n        </div>\n        <popup-tips :show.sync="dataForPopupTips.show" :tips-type="dataForPopupTips.type" :tips-title="dataForPopupTips.title" :tips-content="dataForPopupTips.content"></popup-tips>\n    </div>\n</template>\n\n<script>\nimport popupTips from \'../../../components/popupTips.vue\'\nimport { callback } from \'../../../store\'\nimport { orderValidator } from \'../../../store/dataValidator.js\'\n\nexport default {\n    name: \'ApplyRefundDialogView\',\n    components: {\n        popupTips,\n    },\n    props: [\'show\', \'data\'],\n    data() {\n        return {\n        \tbuttonEnabled: true,\n            dataForPopupTips: {\n                show: false,\n                type: \'danger\',\n                title: \'\',\n                content: \'\',\n            },\n        }\n    },\n    methods: {\n    \tvalidateRefundInfo() {\n            var result = orderValidator.validateRefundAmount(this.data.refundAmount, this.data.maxRefundValue);\n            if (!result.ok) {\n                return result.errorMsg;\n            }\n            if (!this.data.refundMethod) {\n                return \'请选择退款渠道\';\n            }\n            result = orderValidator.validateRefundAccount(this.data.refundAccount);\n            if (!result.ok) {\n                return result.errorMsg;\n            }\n            result = orderValidator.validateRefundReason(this.data.refundReason);\n            if (!result.ok) {\n                return result.errorMsg;\n            }\n            return;\n        },\n        confirmSubmit() {\n            if (this.buttonEnabled) {\n                this.buttonEnabled = false;\n                this.addRefund();\n            }\n        },\n        addRefund() {\n        \tvar result = this.validateRefundInfo();\n            if(result) {\n                this.dataForPopupTips.show = true;\n                this.dataForPopupTips.title = \'输入有误\';\n                this.dataForPopupTips.content = result;\n                this.buttonEnabled = true;\n                return;\n            }\n            var url = \'/api/v2/admin/refunds/create?order_id=\' + this.data.orderId;\n            var data = {\n                amount: this.data.refundAmount,\n                method: this.data.refundMethod,\n                account: this.data.refundAccount,\n                name: this.data.refundName,\n                reason: this.data.refundReason,\n            };\n            this.$http.post(url, data)\n            .then((response) => {\n                if(!response.data.result || response.data.result === 0) {\n                    this.show = false;\n                    this.$dispatch(\'apply-refund\');\n                } else {\n                    callback.success(response.data);\n                }\n                this.buttonEnabled = true;\n            },(response) => {\n                callback.error(response);\n                this.buttonEnabled = true;\n            });\n        },\n    \tcloseDialog() {\n            this.show = false;\n        },\n    }\n}\n</script>\n\n<style scoped>\n.modal {\n    height: 100%;\n}\n\n.modal-dialog {\n    top: 20%;\n}\n\n</style>'],
sourceRoot:"webpack://"}])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(82),a=i(o),r=n(48),s=n(87);e["default"]={name:"ApplyRefundDialogView",components:{popupTips:a["default"]},props:["show","data"],data:function(){return{buttonEnabled:!0,dataForPopupTips:{show:!1,type:"danger",title:"",content:""}}},methods:{validateRefundInfo:function(){var t=s.orderValidator.validateRefundAmount(this.data.refundAmount,this.data.maxRefundValue);return t.ok?this.data.refundMethod?(t=s.orderValidator.validateRefundAccount(this.data.refundAccount),t.ok?(t=s.orderValidator.validateRefundReason(this.data.refundReason),t.ok?void 0:t.errorMsg):t.errorMsg):"请选择退款渠道":t.errorMsg},confirmSubmit:function(){this.buttonEnabled&&(this.buttonEnabled=!1,this.addRefund())},addRefund:function(){var t=this,e=this.validateRefundInfo();if(e)return this.dataForPopupTips.show=!0,this.dataForPopupTips.title="输入有误",this.dataForPopupTips.content=e,void(this.buttonEnabled=!0);var n="/api/v2/admin/refunds/create?order_id="+this.data.orderId,i={amount:this.data.refundAmount,method:this.data.refundMethod,account:this.data.refundAccount,name:this.data.refundName,reason:this.data.refundReason};this.$http.post(n,i).then(function(e){e.data.result&&0!==e.data.result?r.callback.success(e.data):(t.show=!1,t.$dispatch("apply-refund")),t.buttonEnabled=!0},function(e){r.callback.error(e),t.buttonEnabled=!0})},closeDialog:function(){this.show=!1}}}},function(t,e){t.exports=' <div class=modal v-show=show _v-5351c195=""> <div class=modal-dialog _v-5351c195=""> <div class=modal-content _v-5351c195=""> <div class=modal-header _v-5351c195=""> <button type=button class=close @click=closeDialog _v-5351c195="">×</button> <h4 class=modal-title _v-5351c195="">申请退款</h4> </div> <div class=modal-body _v-5351c195=""> <h5 _v-5351c195="">可退金额最多为{{data.maxRefundValue | realPrice}}元</h5> <form class=form-horizontal _v-5351c195=""> <div class=form-group _v-5351c195=""> <label class="col-lg-4 control-label" for=refundAmount _v-5351c195="">退款金额<span class=text-danger _v-5351c195="">*</span>：</label> <div class=col-lg-6 _v-5351c195=""> <input class="form-control input-sm" id=refundAmount type=text v-model="data.refundAmount | priceFilter" _v-5351c195=""> </div> </div> <div class=form-group _v-5351c195=""> <label class="col-lg-4 control-label" for=refundMethod _v-5351c195="">退款渠道<span class=text-danger _v-5351c195="">*</span>：</label> <div class=col-lg-6 _v-5351c195=""> <select class="form-control input-sm" id=refundMethod v-model=data.refundMethod _v-5351c195=""> <option value=BANK_TRANSFER _v-5351c195="">银行转账</option> <option value=ALIPAY_TRANSFER _v-5351c195="">支付宝转账</option> </select> </div> </div> <div class=form-group _v-5351c195=""> <label class="col-lg-4 control-label" for=refundAccount _v-5351c195="">对方账号<span class=text-danger _v-5351c195="">*</span>：</label> <div class=col-lg-6 _v-5351c195=""> <input class="form-control input-sm" id=refundAccount type=text v-model=data.refundAccount _v-5351c195=""> </div> </div> <div class=form-group _v-5351c195=""> <label class="col-lg-4 control-label" for=refundName _v-5351c195="">对方名称：</label> <div class=col-lg-6 _v-5351c195=""> <input class="form-control input-sm" id=refundName type=text v-model=data.refundName _v-5351c195=""> </div> </div> <div class=form-group _v-5351c195=""> <label class="col-lg-4 control-label" for=refundReason _v-5351c195="">退款原因<span class=text-danger _v-5351c195="">*</span>：</label> <div class=col-lg-6 _v-5351c195=""> <input class="form-control input-sm" id=refundReason type=text v-model=data.refundReason _v-5351c195=""> </div> </div> </form> </div> <div class=modal-footer _v-5351c195=""> <button type=button class="btn btn-primary" :disabled=!buttonEnabled @click=confirmSubmit _v-5351c195="">确定</button> </div> </div> </div> <popup-tips :show.sync=dataForPopupTips.show :tips-type=dataForPopupTips.type :tips-title=dataForPopupTips.title :tips-content=dataForPopupTips.content _v-5351c195=""></popup-tips> </div> '},function(t,e){t.exports=' <div class=container-fluid _v-1b718ff8=""> <ul class=breadcrumb _v-1b718ff8=""> <li _v-1b718ff8="">订单系统</li> <li _v-1b718ff8="">订单管理</li> <li _v-1b718ff8="">订单详情：{{orderId}}</li> </ul> <div class=pull-right _v-1b718ff8=""> <a class="btn btn-info btn-sm" v-show=canCancel @click=showCancelOrderDialog _v-1b718ff8="">取消</a> <a class="btn btn-info btn-sm" v-show=canFinish @click=showFinishOrderDialog _v-1b718ff8="">完成</a> <a class="btn btn-info btn-sm" v-show=canConfirm @click=showConfirmOrderDialog _v-1b718ff8="">确认</a> <a class="btn btn-info btn-sm" v-show="orderId &amp;&amp; permissionList.editOrder" v-link="{ path: \'/order/edit/\'+orderId }" _v-1b718ff8="">编辑</a> <a class="btn btn-info btn-sm" v-show="orderId &amp;&amp; permissionList.createOrder" v-link="{ path: \'/order/create/\'+orderId }" target=_blank _v-1b718ff8="">复制该订单</a> </div> <h3 _v-1b718ff8="">订单详情</h3> <p class=clearfix _v-1b718ff8=""></p> <div class="panel panel-default" _v-1b718ff8=""> <div class=panel-body _v-1b718ff8=""> <div class="row h4" _v-1b718ff8=""> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">订单编号：</b>{{orderBasic.id}}</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">订单状态：</b>{{orderBasic.status | orderStatusFilter}}</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">订单日期：</b>{{orderDate | dateFormat \'toDate\'}}</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">创建时间：</b>{{orderBasic.create_time | dateFormat}}</div> </div> <div class="row h4" _v-1b718ff8=""> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">客户经理/客服：</b>{{orderBasic.manager ? orderBasic.manager.display_name : \'\'}}</div> <div class=col-lg-6 _v-1b718ff8=""><b _v-1b718ff8="">创建人：</b>{{orderBasic.creator.type === \'USER\' ? \'酱印网 \' + (orderBasic.creator.username ? orderBasic.creator.username : \'\') : orderBasic.creator.display_name}}</div> </div> <div class="row h4" _v-1b718ff8=""> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">订单金额：</b>{{(orderId ? orderBasic.amount + orderBasic.freight : \'\') | realPrice}}{{orderBasic.is_priced === false ? \'+？\' : \'\'}}元</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">盈利：</b>{{(isOrderProfitSure ? (orderBasic.amount + orderBasic.freight - orderBasic.cost - orderBasic.extra_cost - orderBasic.logistics_cost - orderBasic.invoice_logistics_cost - orderBasic.refunded_amount) : \'\') | realPrice}}{{(!orderId || isOrderProfitSure) ? \'\' : \'？\'}}元</div> </div> <div class="row h4" _v-1b718ff8=""> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">商品成本：</b>{{orderBasic.cost | realPrice}}{{!orderId || isProductCostSure ? \'\' : \'+？\'}}元</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">额外成本：</b>{{orderBasic.extra_cost | realPrice}}元</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">物流成本：</b>{{orderBasic.logistics_cost | realPrice}}+{{orderBasic.invoice_logistics_cost | realPrice}}元</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">退款金额：</b>{{orderBasic.refunded_amount | realPrice}}元</div> </div> </div> </div> <div class="panel panel-default" _v-1b718ff8=""> <div class=panel-heading _v-1b718ff8="">商品清单</div> <div class=panel-body _v-1b718ff8=""> <table class="table table-bordered table-hover product-table" _v-1b718ff8=""> <thead _v-1b718ff8=""> <tr _v-1b718ff8=""> <th style=width:6% _v-1b718ff8="">ID</th> <th style=width:10% _v-1b718ff8="">产品名称</th> <th style=width:18% _v-1b718ff8="">参数</th> <th style=width:8% _v-1b718ff8="">数量</th> <th style=width:8% _v-1b718ff8="">价格(元)</th> <th style=width:8% _v-1b718ff8="">成本(元)</th> <th style=width:15% _v-1b718ff8="">到货时间要求</th> <th style=width:8% _v-1b718ff8="">制作负责人</th> <th style=width:8% _v-1b718ff8="">制作状态</th> <th style=width:11% _v-1b718ff8="">印刷文件</th> </tr> </thead> <tbody _v-1b718ff8=""> <tr v-for="item of orderItems" _v-1b718ff8=""> <td _v-1b718ff8="">{{item.id}}</td> <template v-if=item.is_custom _v-1b718ff8=""> <td _v-1b718ff8="">{{item.detail.name}}</td> <td _v-1b718ff8=""> <a class=btn-link @click=showProductDetailDialog(item) _v-1b718ff8=""> {{item.detail.size}}{{(item.detail.size &amp;&amp; (item.detail.caizhi || item.detail.others)) ? \'_\' : \'\'}}{{item.detail.caizhi}}{{(item.detail.caizhi &amp;&amp; item.detail.others) ? \'_\' : \'\'}}{{item.detail.others}} </a> </td> <td _v-1b718ff8="">{{item.detail.quantity}}</td> </template> <template v-else="" _v-1b718ff8=""> <td _v-1b718ff8=""> <a class=btn-link :href="\'http://www.soyyin.com/product?id=\'+item.product_id+\'#\'+item.brief" target=_blank _v-1b718ff8="">{{item.title}}</a> </td> <td _v-1b718ff8="">{{item.brief}}</td> <td _v-1b718ff8="">{{item.quantity}}</td> </template> <td _v-1b718ff8="">{{item.price === 0 ? \'暂无\' : \'\'}}{{(item.price === 0 ? \'\' : item.price ) | realPrice}}</td> <td _v-1b718ff8="">{{(item.cost ? item.cost : \'\') | realPrice}}</td> <td _v-1b718ff8="">{{item.arrival_time}}</td> <td _v-1b718ff8="">{{item.producer ? item.producer.name : \'\'}}</td> <td _v-1b718ff8="">{{item.produce_status | produceStatusFilter}}</td> <td _v-1b718ff8=""><a class=btn-link v-if=item.file :href="item.file.file_key | getQiniuUrl" target=_blank _v-1b718ff8="">{{item.file.file_name}}</a></td> </tr> </tbody> </table> <div class=row _v-1b718ff8=""> <div class=col-lg-6 _v-1b718ff8=""> <div class="panel panel-default" _v-1b718ff8=""> <div class=panel-body _v-1b718ff8=""> <a class="pull-right btn btn-info btn-sm" v-show=canChangeExtraAmount @click=changeExtraAmount _v-1b718ff8="">修改</a> <h4 _v-1b718ff8="">订单金额补充</h4> <div class=row style="margin: 0" _v-1b718ff8=""> <label class=pull-left _v-1b718ff8="">补充金额：</label> <p class=pull-left _v-1b718ff8="">{{orderBasic.freight | realPrice}}元</p> </div> <div class=row style="margin: 0" _v-1b718ff8=""> <label class=pull-left _v-1b718ff8="">备注：</label> <p class=pull-left style="width: 85%" _v-1b718ff8="">{{orderBasic.freight_remark}}</p> </div> </div> </div> </div> <div class=col-lg-6 _v-1b718ff8=""> <div class="panel panel-default" _v-1b718ff8=""> <div class=panel-body _v-1b718ff8=""> <a class="pull-right btn btn-info btn-sm" v-show=canChangeExtraCost @click=changeExtraCost _v-1b718ff8="">修改</a> <h4 _v-1b718ff8="">额外成本</h4> <div class=row style="margin: 0" _v-1b718ff8=""> <label class=pull-left _v-1b718ff8="">金额：</label> <p class=pull-left _v-1b718ff8="">{{orderBasic.extra_cost | realPrice}}元</p> </div> <div class=row style="margin: 0" _v-1b718ff8=""> <label class=pull-left _v-1b718ff8="">备注：</label> <p class=pull-left style="width: 85%" _v-1b718ff8="">{{orderBasic.extra_cost_remark}}</p> </div> </div> </div> </div> </div> <div _v-1b718ff8=""> <h4 class=pull-right _v-1b718ff8=""><b _v-1b718ff8="">订单金额：</b>{{(orderId ? orderBasic.amount + orderBasic.freight : \'\') | realPrice}}{{orderBasic.is_priced === false ? \'+？\' : \'\'}}元</h4> </div> </div> </div> <div class="panel panel-default" _v-1b718ff8=""> <div class=panel-heading _v-1b718ff8="">客户信息</div> <div class=panel-body _v-1b718ff8=""> <h4 class=row style="margin-bottom: 25px" _v-1b718ff8=""> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">客户名称：</b>{{orderBasic.customer.name}}</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">联系电话：</b>{{orderBasic.customer.phone}}</div> <div class=col-lg-2 _v-1b718ff8=""><b _v-1b718ff8="">QQ：</b>{{orderBasic.customer.qq}}</div> <div class=col-lg-4 _v-1b718ff8=""><b _v-1b718ff8="">公司：</b>{{orderBasic.customer.company}}</div> </h4> <template v-for="consigneeItem of consignees" _v-1b718ff8=""> <consignee-info-with-logistics :index=$index :consignee-item=consigneeItem :can-add-logistics=false _v-1b718ff8=""></consignee-info-with-logistics> </template> </div> </div> <div class="panel panel-default invoice-info" _v-1b718ff8=""> <div class=panel-heading _v-1b718ff8="">发票信息</div> <div class=panel-body _v-1b718ff8=""> <a class="pull-right btn btn-info btn-sm" v-if=canApplyInvoice @click=clickToApplyInvoice _v-1b718ff8="">申请开票</a> <h4 class=row _v-1b718ff8=""> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">开票额度：</b>{{(orderId ? orderBasic.amount + orderBasic.freight : \'\') | realPrice}}{{orderBasic.is_priced === false ? \'+？\' : \'\'}}元</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">已申请：</b>{{orderBasic.invoiced_amount | realPrice}}元</div> </h4> <p _v-1b718ff8=""><a class=btn-link v-if=invoiceInfo @click=clickToshowInvoiceInfoDialog _v-1b718ff8="">{{invoiceInfo.zengzhishui ? \'增值税发票\' : \'普通发票\'}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{invoiceInfo.title}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{invoiceInfo.content}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{invoiceInfo.amount | realPrice}}元</a></p> <template v-if="invoiceRecords.length > 0" _v-1b718ff8=""> <h4 _v-1b718ff8="">开票历史</h4> <div class="panel panel-default" v-for="recordItem in invoiceRecords" _v-1b718ff8=""> <div class=panel-body _v-1b718ff8=""> <a class="pull-right btn-link" @click=showOrHideInvoiceRecordItem(recordItem) _v-1b718ff8="">{{recordItem.showAll ? \'收起\' : \'展开\'}}</a> <div class=row _v-1b718ff8=""> <div class=col-lg-2 _v-1b718ff8=""><b _v-1b718ff8="">状态：</b>{{recordItem.status | invoiceStatusFilter}}</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">申请时间：</b>{{recordItem.create_time | dateFormat}}</div> <div class=col-lg-6 _v-1b718ff8="">{{recordItem.data.zengzhishui ? \'增值税发票\' : \'普通发票\'}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.data.title}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.data.content}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.data.amount | realPrice}}元</div> </div> <div v-show=recordItem.showAll _v-1b718ff8=""> <div class=row _v-1b718ff8=""> <div class=col-lg-2 _v-1b718ff8=""><b _v-1b718ff8="">开票申请ID：</b>{{recordItem.id}}</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">开票类型：</b>{{recordItem.order_ids.length &gt; 1 ? \'(\' + recordItem.order_ids.length + \'订单)合并开票\' : \'单开\'}}</div> <div class=col-lg-2 _v-1b718ff8=""><b _v-1b718ff8="">使用额度：</b>{{recordItem.amount_of_order | realPrice}}元</div> <div class=col-lg-3 v-if=recordItem.invoice_time _v-1b718ff8=""><b _v-1b718ff8="">开票时间：</b>{{recordItem.invoice_time | dateFormat}}</div> <div class=col-lg-3 v-if=recordItem.finish_time _v-1b718ff8=""><b _v-1b718ff8="">完成时间：</b>{{recordItem.finish_time | dateFormat}}</div> </div> <div class=row style="margin: 0" v-if=recordItem.data.remark _v-1b718ff8=""> <div class=pull-left _v-1b718ff8=""><b _v-1b718ff8="">备注：</b></div> <p class=pull-left style="width: 90%" _v-1b718ff8="">{{recordItem.data.remark}}</p> </div> <div class=row v-if=recordItem.data.zengzhishui _v-1b718ff8=""> <div class=col-lg-1 style=text-align:right _v-1b718ff8="">增值税发票信息</div> <div class=col-lg-11 _v-1b718ff8=""> <div class=row _v-1b718ff8=""> <div class=col-lg-4 _v-1b718ff8=""><b _v-1b718ff8="">纳税人识别号：</b>{{recordItem.data.zengzhishui.identifier}}</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">电话：</b>{{recordItem.data.zengzhishui.phone}}</div> </div> <div class=row _v-1b718ff8=""> <div class=col-lg-12 _v-1b718ff8=""><b _v-1b718ff8="">注册地址：</b>{{recordItem.data.zengzhishui.address}}</div> </div> <div class=row _v-1b718ff8=""> <div class=col-lg-4 _v-1b718ff8=""><b _v-1b718ff8="">银行账号：</b>{{recordItem.data.zengzhishui.account}}</div> <div class=col-lg-7 _v-1b718ff8=""><b _v-1b718ff8="">开户行：</b>{{recordItem.data.zengzhishui.bank}}</div> </div> </div> </div> <div class=row _v-1b718ff8=""> <div class=col-lg-1 style=text-align:right _v-1b718ff8="">发票寄送至</div> <div class=col-lg-11 _v-1b718ff8=""> <div class=row _v-1b718ff8=""> <div class=col-lg-4 _v-1b718ff8=""><b _v-1b718ff8="">收货人：</b>{{recordItem.data.consignee_name}}</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">联系电话：</b>{{recordItem.data.consignee_phone}}</div> </div> <div class=row _v-1b718ff8=""> <div class=col-lg-12 _v-1b718ff8=""><b _v-1b718ff8="">邮寄地址：</b>{{recordItem.data.address}}</div> </div> </div> </div> <div class=row v-if=recordItem.logistics _v-1b718ff8=""> <div class=col-lg-1 style=text-align:right _v-1b718ff8="">物流信息</div> <div class=col-lg-11 _v-1b718ff8=""> <div _v-1b718ff8="">{{recordItem.logistics.delivery_method}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.logistics.express}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.logistics.express_order_id}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.logistics.cost | realPrice}}元&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{recordItem.logistics.create_time | dateFormat}}录入</div> <div v-if=recordItem.logistics.remark _v-1b718ff8="">{{recordItem.logistics.remark}}</div> </div> </div> </div> </div> </div> </template> </div> </div> <div class="panel panel-default" _v-1b718ff8=""> <div class=panel-heading _v-1b718ff8="">付款信息</div> <div class=panel-body _v-1b718ff8=""> <template v-if="orderBasic.status === \'DELIVERY_CONFIRMED\'" _v-1b718ff8=""> <a class="pull-right btn btn-info btn-sm" @click=jumpToZhifubaoPayLink _v-1b718ff8="">支付宝支付链接</a> <a class="pull-right btn btn-info btn-sm" style=margin-right:20px @click=showZhifubaoQRCodeDialog _v-1b718ff8="">支付宝二维码</a> <a class="pull-right btn btn-info btn-sm" style=margin-right:20px @click=showWeChatQRCodeDialog _v-1b718ff8="">微信二维码</a> </template> <h4 class=row _v-1b718ff8=""> <template v-if=orderBasic.is_priced _v-1b718ff8=""> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">已支付：</b>{{paymentData.paid_amount | realPrice}}元({{Math.round(paymentData.paid_amount / (orderBasic.amount + orderBasic.freight) * 100)}}%)</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">待支付：</b>{{(orderBasic.amount + orderBasic.freight - paymentData.paid_amount) | realPrice}}元({{100 - Math.round(paymentData.paid_amount / (orderBasic.amount + orderBasic.freight) * 100)}}%)</div> </template> <template v-else="" _v-1b718ff8=""> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">已支付：</b>0元(0%)</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">待支付：</b>？元(100%)</div> </template> </h4> <h4 v-if=paymentData.payment _v-1b718ff8=""><b _v-1b718ff8="">付款方式：</b>{{paymentData.payment | paymentFilter}}</h4> <p v-if=paymentData.remark _v-1b718ff8="">{{paymentData.remark}}</p> <table class="table table-bordered table-hover payment-records-table" v-if="paymentData.records &amp;&amp; paymentData.records.length > 0" _v-1b718ff8=""> <thead _v-1b718ff8=""> <tr _v-1b718ff8=""> <th style=width:5% _v-1b718ff8="">序号</th> <th style=width:20% _v-1b718ff8="">付款时间</th> <th style=width:10% _v-1b718ff8="">付款途径</th> <th style=width:15% _v-1b718ff8="">付款方式</th> <th style=width:30% _v-1b718ff8="">支付单号</th> <th style=width:10% _v-1b718ff8="">付款金额</th> <th style=width:10% _v-1b718ff8="">付款比例</th> </tr> </thead> <tbody _v-1b718ff8=""> <tr v-for="paymentRecordItem of paymentData.records" _v-1b718ff8=""> <td _v-1b718ff8="">{{$index + 1}}</td> <td _v-1b718ff8="">{{paymentRecordItem.create_time | dateFormat}}</td> <td _v-1b718ff8="">{{paymentRecordItem.method === \'PINGXX\' ? \'线上支付\' : \'线下转账\'}}</td> <td _v-1b718ff8="">{{paymentRecordItem.method === \'PINGXX\' ? \'Ping++支付\' : (paymentRecordItem.method === \'BANK_TRANSFER\' ? \'银行转账\' : \'支付宝转账\')}}</td> <td _v-1b718ff8="">{{paymentRecordItem.payment_order_id}}</td> <td _v-1b718ff8="">{{paymentRecordItem.amount | realPrice}}元</td> <td _v-1b718ff8="">{{Math.round(paymentRecordItem.amount / (orderBasic.amount + orderBasic.freight) * 100)}}%</td> </tr> </tbody> </table> </div> </div> <div class="panel panel-default" _v-1b718ff8=""> <div class=panel-body _v-1b718ff8=""> <div class=col-md-6 _v-1b718ff8=""> <h4 _v-1b718ff8="">其他信息</h4> <p _v-1b718ff8=""><b _v-1b718ff8="">备注：</b>{{orderBasic.remark}}</p> </div> <div class=col-md-6 _v-1b718ff8=""> <h4 _v-1b718ff8="">历史记录</h4> <ul class=list-unstyled _v-1b718ff8=""> <li v-for="history of orderHistories" _v-1b718ff8=""> <p :class="{\'text-muted\': $index+1 !== orderHistories.length}" _v-1b718ff8=""> {{$index+1}}. {{history.create_time | dateFormat}} <span :class="{\'text-success\': history.status === \'FINISHED\', \'text-danger\': history.status === \'CANCELED\'}" _v-1b718ff8="">{{history.status | orderStatusFilter}}</span> </p> </li> </ul> </div> </div> </div> <div class="panel panel-default" _v-1b718ff8=""> <div class=panel-heading _v-1b718ff8="">售后处理</div> <div class=panel-body _v-1b718ff8=""> <a class="pull-right btn btn-info btn-sm" v-if=canRecordAfterSale @click=clickToRecordAfterSale _v-1b718ff8="">录入售后问题</a> <div class=col-lg-10 _v-1b718ff8=""> <p _v-1b718ff8=""><b _v-1b718ff8="">售后问题描述：</b>暂无</p> <p _v-1b718ff8=""><b _v-1b718ff8="">处理方案：</b>暂无</p> </div> </div> </div> <div class="panel panel-default" _v-1b718ff8=""> <div class=panel-heading _v-1b718ff8="">退款处理</div> <div class=panel-body _v-1b718ff8=""> <a class="pull-right btn btn-info btn-sm" v-if=canApplyRefund @click=clickToApplyRefund _v-1b718ff8="">申请退款</a> <h4 class=row _v-1b718ff8=""> <div class=col-lg-4 _v-1b718ff8=""><b _v-1b718ff8="">已申请退款：</b>{{orderBasic.refunded_amount | realPrice}}元</div> </h4> <table class="table table-bordered table-hover refund-records-table" v-if="refundRecords.length > 0" _v-1b718ff8=""> <thead _v-1b718ff8=""> <tr _v-1b718ff8=""> <th style=width:5% _v-1b718ff8="">序号</th> <th style=width:8% _v-1b718ff8="">ID</th> <th style=width:8% _v-1b718ff8="">退款金额</th> <th style=width:10% _v-1b718ff8="">状态</th> <th style=width:19% _v-1b718ff8="">操作时间</th> <th style=width:12% _v-1b718ff8="">退款类型</th> <th style=width:22% _v-1b718ff8="">退款信息</th> <th style=width:16% _v-1b718ff8="">退款原因</th> </tr> </thead> <tbody _v-1b718ff8=""> <tr v-for="refundItem in refundRecords" _v-1b718ff8=""> <td _v-1b718ff8="">{{$index + 1}}</td> <td _v-1b718ff8="">{{refundItem.id}}</td> <td _v-1b718ff8="">{{refundItem.amount | realPrice}}元</td> <td :class="{\'text-success\': refundItem.status === \'FINISHED\'}" _v-1b718ff8="">{{refundItem.status | refundStatusFilter}}</td> <td _v-1b718ff8=""> 创建时间：{{refundItem.create_time | dateFormat}}<br _v-1b718ff8=""> <template v-if=refundItem.finish_time _v-1b718ff8=""> 完成时间：{{refundItem.finish_time | dateFormat}}<br _v-1b718ff8=""> </template> </td> <td _v-1b718ff8="">{{refundItem.type | refundTypeFilter}}</td> <td _v-1b718ff8=""> 退款渠道：{{refundItem.method | refundWayFilter}}<br _v-1b718ff8=""> <template v-if="refundItem.type === \'BY_HAND\'" _v-1b718ff8=""> 对方账号：{{refundItem.account}}<br _v-1b718ff8=""> 对方姓名：{{refundItem.name}}<br _v-1b718ff8=""> </template> </td> <td _v-1b718ff8="">{{refundItem.reason}}</td> </tr> </tbody> </table> </div> </div> <div class=modal style=height:100% v-if=invoiceInfo v-show=showInvoiceInfoDialog _v-1b718ff8=""> <div class=modal-dialog style=top:30%;width:900px _v-1b718ff8=""> <div class=modal-content _v-1b718ff8=""> <div class=modal-header _v-1b718ff8=""> <button type=button class=close @click=closeInvoiceInfoDialog _v-1b718ff8="">×</button> <h4 class=modal-title _v-1b718ff8="">发票信息</h4> </div> <div class=modal-body _v-1b718ff8=""> <div class=row _v-1b718ff8=""> <div class=col-lg-2 style=text-align:right _v-1b718ff8="">发票信息</div> <div class=col-lg-10 _v-1b718ff8=""> <div class=row _v-1b718ff8=""> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">开票金额：</b>{{invoiceInfo.amount | realPrice}}元</div> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">开票类型：</b>{{invoiceInfo.zengzhishui ? \'增值税发票\' : \'普通发票\'}}</div> <div class=col-lg-5 _v-1b718ff8=""><b _v-1b718ff8="">开票内容：</b>{{invoiceInfo.content}}</div> </div> <div class=row _v-1b718ff8=""> <div class=col-lg-12 _v-1b718ff8=""><b _v-1b718ff8="">发票抬头：</b>{{invoiceInfo.title}}</div> </div> <div class=row _v-1b718ff8=""> <div class=col-lg-12 _v-1b718ff8=""><b _v-1b718ff8="">备注：</b>{{invoiceInfo.remark}}</div> </div> </div> </div> <div class=row v-if=invoiceInfo.zengzhishui _v-1b718ff8=""> <div class=col-lg-2 style=text-align:right _v-1b718ff8="">增值税发票信息</div> <div class=col-lg-10 _v-1b718ff8=""> <div class=row _v-1b718ff8=""> <div class=col-lg-5 _v-1b718ff8=""><b _v-1b718ff8="">纳税人识别号：</b>{{invoiceInfo.zengzhishui.identifier}}</div> <div class=col-lg-4 _v-1b718ff8=""><b _v-1b718ff8="">电话：</b>{{invoiceInfo.zengzhishui.phone}}</div> </div> <div class=row _v-1b718ff8=""> <div class=col-lg-12 _v-1b718ff8=""><b _v-1b718ff8="">注册地址：</b>{{invoiceInfo.zengzhishui.address}}</div> </div> <div class=row _v-1b718ff8=""> <div class=col-lg-5 _v-1b718ff8=""><b _v-1b718ff8="">银行账号：</b>{{invoiceInfo.zengzhishui.account}}</div> <div class=col-lg-7 _v-1b718ff8=""><b _v-1b718ff8="">开户行：</b>{{invoiceInfo.zengzhishui.bank}}</div> </div> </div> </div> <div class=row _v-1b718ff8=""> <div class=col-lg-2 style=text-align:right _v-1b718ff8="">发送寄送至</div> <div class=col-lg-10 _v-1b718ff8=""> <div class=row _v-1b718ff8=""> <div class=col-lg-3 _v-1b718ff8=""><b _v-1b718ff8="">收货人：</b>{{invoiceInfo.consignee_name}}</div> <div class=col-lg-5 _v-1b718ff8=""><b _v-1b718ff8="">联系电话：</b>{{invoiceInfo.consignee_phone}}</div> </div> <div class=row _v-1b718ff8=""> <div class=col-lg-12 _v-1b718ff8=""><b _v-1b718ff8="">邮寄地址：</b>{{invoiceInfo.address}}</div> </div> </div> </div> </div> </div> </div> </div> <product-detail-dialog :show.sync=dataForProductDetailDialog.show :detail=dataForProductDetailDialog.detail _v-1b718ff8=""></product-detail-dialog> <edit-extra-amount-dialog v-if=canChangeExtraAmount :show.sync=dataForEditExtraAmountDialog.show :data=dataForEditExtraAmountDialog.data _v-1b718ff8=""></edit-extra-amount-dialog> <edit-extra-cost-dialog v-if=canChangeExtraCost :show.sync=dataForEditExtraCostDialog.show :data=dataForEditExtraCostDialog.data _v-1b718ff8=""></edit-extra-cost-dialog> <apply-invoice-dialog v-if=canApplyInvoice :show.sync=dataForApplyInvoiceDialog.show :order-ids=dataForApplyInvoiceDialog.orderIds :invoice-info=dataForApplyInvoiceDialog.invoiceInfo :max-apply-amount=dataForApplyInvoiceDialog.maxApplyAmount _v-1b718ff8=""></apply-invoice-dialog> <pay-qr-code-dialog v-if="orderBasic.status === \'DELIVERY_CONFIRMED\'" :show.sync=dataForPayQrCodeDialog.show :data=dataForPayQrCodeDialog.data _v-1b718ff8=""></pay-qr-code-dialog> <apply-refund-dialog v-if=canApplyRefund :show.sync=dataForApplyRefundDialog.show :data=dataForApplyRefundDialog.data _v-1b718ff8=""></apply-refund-dialog> <popup-dialog :show-dialog.sync=dataForPopupDialog.show :dialog-title=dataForPopupDialog.title :dialog-content=dataForPopupDialog.content _v-1b718ff8=""></popup-dialog> </div> '}]);
//# sourceMappingURL=4.js.map?eedac9026f9c1fe791be